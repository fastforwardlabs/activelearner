{"version":3,"sources":["Header.js","Utils.js","mnist_strategies.js","Canvas.js","Accuracy.js","Footer.js","Projection.js","Layout.js","Selected.js","ProjectionSelected.js","BigButton.js","Timer.js","Data.js","App.js","serviceWorker.js","index.js"],"names":["capitalize","s","charAt","toUpperCase","slice","Header","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","setHeight","bind","assertThisInitialized","height","divElement","clientHeight","setHeaderHeight","_this2","_this$props","datasets","selectDataset","strategies","strategy","selectStrategy","strategy_colors","dataset","grem","activeStyle","react_default","a","createElement","ref","style","position","left","top","display","flexWrap","background","padding","concat","pointerEvents","fontWeight","map","n","i","inner","active","onClick","key","color","reduce","p","c","Component","toPercent2","x","Math","round","drawLine","ctx","y","move_boolean","moveTo","lineTo","boxShadow","textDecoration","decodeS","string","splits","split","mnist","random","accuracy","num_labeled","entropy","adversarial","ensemble","Canvas","getCtx","refs","canvas","lineHeight","width","Accuracy","toConsumableArray","Array","draw","handleRound","getContext","scale","prevProps","strategy_explored","new_round","selectRound","transition_status","results","point_size","all_strat_results","_","rounded_min","floor","space","clearRect","y_padding","fillStyle","fillRect","lineWidth","strokeStyle","beginPath","stroke","non_active_strats","filter","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","strat","value","these_results","cell_width","arc","PI","fill","err","return","_this$props2","adjusted_round","round_limit","label_round","src_Canvas","Fragment","cursor","justifyContent","parts","toString","replace","join","comma","Footer","setFooterHeight","ww","color_array_hexes","simulating_labeling","gradient_string","adjusted_explored","max","bottom","src_Accuracy","mnist_tile_locations","process","THREE","load","flipY","ranges","start","sprite_side","end","sprite_number","push","color_num","color_array","chroma","luminance","gl","hex","status_to_color","sliceRound","object","range","coordinates","labels","statuses","prepPositions","position_prep","length","embedding","Float32Array","Projection","init","animate","addPoints","transitionPoints","addSelectedPoints","labelSelected","rvFOV","degToRad","camera","fov","tan","camera_z_position","fov_height","d3_transform","d3","transform","k","z","getZFromScale","set","loaded_embedding","embeddings","scene","children","loaded","loaded_sliced","parent_group","slice_number","point_number","geometry","positions","offsets","index","l","color_prep","label","color_flattened","colors","texture","textures","repeat","addAttribute","uniforms","construct","size","material","vertexShader","fragmentShader","point_cloud","add","transition_colors","back_points","existing_points","_loop","back_existing","start_position","attributes","array","end_position","start_colors","end_colors","color_tween","TWEEN","to","easing","Linear","None","onUpdate","needsUpdate","delay","position_tween","chain","existing","indexes","from","sel_start_positions","end_flattened","sel_end_position","me","size_tween","onComplete","setTransitionStatus","sel_position_tween","setTimeout","_this3","_loop2","attribute_indexes","loc_index","_this4","end_size","groups","_loop3","g","points","_this5","_this$props3","_loop4","_this6","Promise","all","texturesSources","loader","textureSource","resolve","reject","getTextures","then","prevd","d","console","log","revealSelected","_this$props4","aspect","renderer","setClearColor","setSize","mount","appendChild","domElement","point_group","selected_point_group","d3_zoom","scaleExtent","getScaleFromZ","far","on","zoomHandler","view","initial_scale","initial_transform","translate","requestAnimationFrame","sortObjects","render","removeChild","_this7","_this$props5","overflow","footer_height","textAlign","Selected","prev_loaded","setState","prev_embeddings","selected_indexes","new_labels","header_height","gutter","side_padding","image_width","image_height","image_pickers","sprite_index","right","opacity","transition","transitionDelay","paddingTop","paddingBottom","gridTemplateColumns","gridColumnGap","gridRowGap","backgroundImage","backgroundSize","backgroundPosition","imageRendering","ProjectionSelected","active_embedding","requested_embedding","mnist_images","loading_round","src_Projection","src_Selected","BigButton","button_text","next_state","paddingLeft","disabled","Timer","count","counter","repeatOften","count_check","labelsGotten","marginTop","min","src","img","document","total","curr","Layout","wh","window","innerWidth","innerHeight","addEventListener","prevState","removeEventListener","status","_this$state","zIndex","src_ProjectionSelected","font_size","src_BigButton","src_Header","src_Footer","justifyItems","alignItems","src_Timer","mnist_strategy_url","es","Data","scaleEmbeddings","fetchData","checkOrFetchData","strat_limit","xs","e","abs","ys","max_x","max_y","domain","url","indexOf","fetch","response","json","r","scaled","embedding_string","assign","defineProperty","src_Layout","App","src_Data","Boolean","location","hostname","match","ReactDOM","src_App_0","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.a04d7381.chunk.js","sourcesContent":["import React, { Component } from 'react'\nimport * as chroma from 'chroma-js'\nconst capitalize = s => {\n  if (typeof s !== 'string') return ''\n  return s.charAt(0).toUpperCase() + s.slice(1)\n}\n\nclass Header extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {}\n    this.setHeight = this.setHeight.bind(this)\n  }\n\n  setHeight() {\n    let height = this.divElement.clientHeight\n    this.props.setHeaderHeight(height)\n  }\n\n  componentDidMount() {\n    this.setHeight()\n  }\n\n  render() {\n    let {\n      datasets,\n      selectDataset,\n      strategies,\n      strategy,\n      strategy_colors,\n      selectStrategy,\n      dataset,\n      activeStyle,\n      grem,\n    } = this.props\n\n    let background = 'transparent'\n    // background = '#444'\n\n    return (\n      <div\n        ref={divElement => {\n          this.divElement = divElement\n        }}\n        style={{\n          position: 'absolute',\n          left: 0,\n          top: 0,\n          display: 'flex',\n          flexWrap: 'wrap',\n        }}\n      >\n        <div\n          style={{\n            background: background,\n            display: 'flex',\n            flexWrap: 'wrap',\n            padding: `0 ${grem / 4}px`,\n            pointerEvents: 'all',\n          }}\n        >\n          <div\n            style={{\n              padding: `0 ${grem / 4}px`,\n              fontWeight: 'bold',\n            }}\n          >\n            Active Learner\n          </div>\n        </div>\n        <div\n          style={{\n            background: background,\n            display: 'flex',\n            flexWrap: 'wrap',\n            padding: `0 ${grem / 4}px`,\n            pointerEvents: 'all',\n          }}\n        >\n          <div style={{ padding: `0 ${grem / 4}px` }}>Dataset:</div>\n          {datasets\n            .map((n, i) => {\n              let active = n === dataset\n              let inner\n              active\n                ? (inner = <span>{n}</span>)\n                : (inner = (\n                    <button\n                      onClick={() => {\n                        selectDataset(i)\n                      }}\n                    >\n                      {n}\n                    </button>\n                  ))\n              return (\n                <span\n                  key={n}\n                  style={{\n                    padding: `0 ${grem / 4}px`,\n                    background: active ? 'white' : 'transparent',\n                    color: active ? 'black' : 'white',\n                  }}\n                >\n                  {inner}\n                </span>\n              )\n            })\n            .reduce((p, c) => [p, ' ', c])}\n        </div>\n        <div\n          style={{\n            background: background,\n            display: 'flex',\n            flexWrap: 'wrap',\n            padding: `0 ${grem / 4}px`,\n            pointerEvents: 'all',\n          }}\n        >\n          <div style={{ padding: `0 ${grem / 4}px` }}>Strategy:</div>\n          {strategies\n            .map((n, i) => {\n              let active = n === strategy\n              let inner\n              active\n                ? (inner = <span>{capitalize(n)}</span>)\n                : (inner = (\n                    <button\n                      onClick={() => {\n                        selectStrategy(i)\n                      }}\n                    >\n                      {capitalize(n)}\n                    </button>\n                  ))\n              return (\n                <span\n                  key={n}\n                  style={{\n                    padding: `0 ${grem / 4}px`,\n                    background: active ? 'white' : 'transparent',\n                    color: active ? 'black' : 'white',\n                  }}\n                >\n                  {inner}\n                </span>\n              )\n            })\n            .reduce((p, c) => [p, ' ', c])}\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Header\n","export function comma(x) {\n  // https://stackoverflow.com/a/2901298/8691291\n  var parts = x.toString().split('.')\n  parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')\n  return parts.join('.')\n}\nexport function toPercent(x) {\n  return Math.round(x * 100) + '%'\n}\n\nexport function toPercent2(x) {\n  return Math.round(x * 10000) / 100 + '%'\n}\n\nexport function drawLine(ctx, x, y, move_boolean) {\n  if (move_boolean) {\n    ctx.moveTo(x, y)\n  } else {\n    ctx.lineTo(x, y)\n  }\n}\n\nexport function rangeDiff(range) {\n  return range[1] - range[0]\n}\n\nexport function activeStyle(color) {\n  let style = {\n    background: color,\n    boxShadow: `-0.25em 0 0 ${color}, 0.25em 0 0 ${color}`,\n    textDecoration: 'none',\n  }\n  return style\n}\n\nexport function decodeS(string) {\n  let splits = string.split('-')\n  return {\n    dataset: splits[0],\n    strategy: splits[1],\n    round: splits[2],\n  }\n}\n","export let mnist = {\n  random: {\n    accuracy: [\n      0.9525,\n      0.9603,\n      0.9573,\n      0.9632,\n      0.9647,\n      0.9658,\n      0.9615,\n      0.9684,\n      0.9668,\n    ],\n    num_labeled: [\n      10000.0,\n      11000.0,\n      12000.0,\n      13000.0,\n      14000.0,\n      15000.0,\n      16000.0,\n      17000.0,\n      18000.0,\n    ],\n  },\n  entropy: {\n    accuracy: [\n      0.9529,\n      0.9658,\n      0.9683,\n      0.979,\n      0.9763,\n      0.9754,\n      0.9807,\n      0.9822,\n      0.9805,\n    ],\n    num_labeled: [\n      10000.0,\n      11000.0,\n      12000.0,\n      13000.0,\n      14000.0,\n      15000.0,\n      16000.0,\n      17000.0,\n      18000.0,\n    ],\n  },\n  adversarial: {\n    accuracy: [\n      0.9529,\n      0.9673,\n      0.9676,\n      0.9755,\n      0.9784,\n      0.9786,\n      0.9784,\n      0.981,\n      0.9795,\n    ],\n    num_labeled: [\n      10000.0,\n      11000.0,\n      12000.0,\n      13000.0,\n      14000.0,\n      15000.0,\n      16000.0,\n      17000.0,\n      18000.0,\n    ],\n  },\n  ensemble: {\n    accuracy: [\n      0.9601,\n      0.973,\n      0.9758,\n      0.9784,\n      0.9813,\n      0.9823,\n      0.9836,\n      0.985,\n      0.9844,\n    ],\n    num_labeled: [\n      10000.0,\n      11000.0,\n      12000.0,\n      13000.0,\n      14000.0,\n      15000.0,\n      16000.0,\n      17000.0,\n      18000.0,\n    ],\n  },\n}\n","import React, { Component } from 'react'\n\nclass Canvas extends Component {\n  componentDidMount() {\n    this.props.getCtx(this.refs.canvas)\n  }\n\n  render() {\n    let { grem } = this.props\n    return (\n      <div style={{ lineHeight: 0, width: this.props.width }}>\n        <canvas\n          ref=\"canvas\"\n          width={this.props.width * 2}\n          height={this.props.height * 2}\n          style={{\n            width: this.props.width,\n            height: this.props.height,\n            pointerEvents: 'auto',\n          }}\n        />\n      </div>\n    )\n  }\n}\n\nexport default Canvas\n","import React, { Component } from 'react'\nimport { comma, drawLine, toPercent2 } from './Utils'\nimport { mnist } from './mnist_strategies.js'\nimport Canvas from './Canvas'\nimport * as chroma from 'chroma-js'\nimport * as _ from 'lodash'\n\nlet placeholder_arrays = [...Array(4)].map(n =>\n  [...Array(5)].map(n => Math.random())\n)\n\nclass Accuracy extends Component {\n  constructor(props) {\n    super(props)\n    this.ctx = null\n    this.getCtx = this.getCtx.bind(this)\n    this.draw = this.draw.bind(this)\n    this.handleRound = this.handleRound.bind(this)\n  }\n\n  getCtx(canvas) {\n    this.ctx = canvas.getContext('2d')\n  }\n\n  componentDidMount() {\n    this.ctx.scale(2, 2)\n    this.draw()\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.strategy_explored !== prevProps.strategy_explored) {\n      this.ctx.scale(2, 2)\n    }\n    this.draw()\n  }\n\n  handleRound(new_round) {\n    if (new_round !== this.props.round) {\n      this.props.selectRound(new_round)\n    }\n  }\n\n  draw() {\n    let {\n      width,\n      height,\n      strategies,\n      strategy_colors,\n      round,\n      strategy,\n      grem,\n      transition_status,\n      strategy_explored,\n    } = this.props\n\n    let results = mnist[strategy]\n\n    height = height - grem * 2\n    if (transition_status === 3) round = round + 1\n    let ctx = this.ctx\n    let point_size = 4\n    // let x_padding = point_size\n    let cell_num = 8\n    let cell_width = 100\n    let x_padding = cell_width / 2\n\n    let all_strat_results = strategies.map(s => _.min(mnist[s].accuracy))\n\n    let rounded_min = Math.floor(_.min(all_strat_results) * 10) / 10\n\n    let rounds_limit = strategy_explored\n\n    let space = 1 - rounded_min\n    let interval = 0.05\n\n    ctx.clearRect(0, 0, cell_width * (strategy_explored + 1), height)\n\n    let y_padding = point_size * 2\n    height = height - y_padding * 2\n\n    ctx.fillStyle = 'rgba(100,100,100,0.3)'\n    ctx.fillRect(round * cell_width, y_padding, cell_width, height)\n\n    ctx.lineWidth = 3\n    ctx.strokeStyle = 'rgba(100,100,100,0.5)'\n    for (let i = 0; i < space + interval; i = i + interval) {\n      ctx.beginPath()\n      let y = (i / space) * height\n      drawLine(ctx, 0, y + y_padding, true)\n      drawLine(ctx, cell_width * (strategy_explored + 1), y + y_padding, false)\n      ctx.stroke()\n    }\n\n    let non_active_strats = strategies.filter(s => s !== strategy)\n\n    for (let strat of non_active_strats) {\n      let these_results = mnist[strat]\n\n      ctx.lineWidth = 2\n      ctx.strokeStyle = '#666'\n      ctx.fillStyle = '#666'\n      ctx.beginPath()\n      for (let i = 0; i < strategy_explored + 1; i++) {\n        let accuracy =\n          (these_results.accuracy[i] - rounded_min) / (1 - rounded_min)\n        drawLine(\n          ctx,\n          i * cell_width + x_padding,\n          height - accuracy * height + y_padding,\n          i === 0\n        )\n      }\n      ctx.stroke()\n      for (let i = 0; i < strategy_explored + 1; i++) {\n        let accuracy =\n          (these_results.accuracy[i] - rounded_min) / (1 - rounded_min)\n        ctx.beginPath()\n        ctx.arc(\n          i * cell_width + x_padding,\n          height - accuracy * height + y_padding,\n          point_size,\n          0,\n          2 * Math.PI\n        )\n        ctx.fill()\n      }\n    }\n\n    point_size = 6\n\n    ctx.lineWidth = 2\n    ctx.strokeStyle = '#efefef'\n    ctx.fillStyle = '#efefef'\n    ctx.beginPath()\n    for (let i = 0; i < strategy_explored + 1; i++) {\n      let accuracy = (results.accuracy[i] - rounded_min) / (1 - rounded_min)\n      drawLine(\n        ctx,\n        i * cell_width + x_padding,\n        height - accuracy * height + y_padding,\n        i === 0\n      )\n    }\n    ctx.stroke()\n    for (let i = 0; i < strategy_explored + 1; i++) {\n      let accuracy = (results.accuracy[i] - rounded_min) / (1 - rounded_min)\n      ctx.beginPath()\n      ctx.arc(\n        i * cell_width + x_padding,\n        height - accuracy * height + y_padding,\n        point_size,\n        0,\n        2 * Math.PI\n      )\n      ctx.fill()\n    }\n  }\n\n  render() {\n    let {\n      width,\n      height,\n      grem,\n      strategies,\n      strategy,\n      round,\n      transition_status,\n      adjusted_round,\n      strategy_explored,\n      round_limit,\n    } = this.props\n\n    let results = mnist[strategy]\n\n    let label_round = round\n    let cell_width = 100\n    if (transition_status > 1) label_round = round + 1\n    return (\n      <div style={{}}>\n        <div style={{ display: 'inline-flex', pointerEvents: 'auto' }}>\n          <div style={{ padding: `0 ${grem / 4}px` }}>\n            <div style={{ padding: `0 ${grem / 4}px` }}>\n              {true ? (\n                <span>\n                  Round {round + 1} of {round_limit + 1}\n                </span>\n              ) : (\n                ' '\n              )}{' '}\n            </div>\n          </div>\n          <div style={{ padding: `0 ${grem / 4}px` }}>\n            <div style={{ padding: `0 ${grem / 4}px` }}>\n              Accuracy: {toPercent2(results.accuracy[round])}\n            </div>\n          </div>\n        </div>\n        <div\n          style={{\n            position: 'relative',\n            width: cell_width * (strategy_explored + 1),\n            height: height - grem * 2,\n            pointerEvents: 'auto',\n          }}\n        >\n          <Canvas\n            width={cell_width * (strategy_explored + 1)}\n            height={height - grem * 2}\n            getCtx={this.getCtx}\n            grem={grem}\n          />\n          <>\n            {[...Array(strategy_explored + 1)].map((n, i) => (\n              <div\n                key={'explored' + i}\n                onClick={() => {\n                  this.handleRound(i)\n                }}\n                style={{\n                  position: 'absolute',\n                  top: 0,\n                  left: cell_width * i,\n                  width: cell_width,\n                  height: height - grem * 2,\n                  cursor: i === round ? 'default' : 'pointer',\n                }}\n              />\n            ))}\n          </>\n        </div>\n        <div\n          style={{\n            display: 'flex',\n            pointerEvents: 'auto',\n            justifyContent: 'space-between',\n            padding: `0 ${grem / 4}px`,\n          }}\n        >\n          <div style={{ padding: `0 ${grem / 4}px` }}>\n            100,000 points, {comma(results.num_labeled[label_round])} labelled (\n            {toPercent2(results.num_labeled[label_round] / 1000000)})\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Accuracy\n","import React, { Component } from 'react'\nimport Accuracy from './Accuracy'\n\nlet color_seed = Math.floor(Math.random() * 10)\n\nclass Footer extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {}\n    this.setHeight = this.setHeight.bind(this)\n  }\n\n  setHeight() {\n    let height = this.divElement.clientHeight\n    this.props.setFooterHeight(height)\n  }\n\n  componentDidMount() {\n    this.setHeight()\n  }\n\n  render() {\n    let {\n      round,\n      ww,\n      grem,\n      strategies,\n      strategy_colors,\n      strategy,\n      selectRound,\n      color_array_hexes,\n      transition_status,\n      simulating_labeling,\n      gradient_string,\n      strategy_explored,\n      round_limit,\n    } = this.props\n\n    let adjusted_round = round\n    let adjusted_explored = strategy_explored\n    if (transition_status > 1 && transition_status < 2.3) {\n      adjusted_round = Math.max(0, adjusted_round - 1)\n      adjusted_explored = Math.max(0, adjusted_explored - 1)\n    }\n\n    return (\n      <div\n        ref={divElement => {\n          this.divElement = divElement\n        }}\n        style={{\n          position: 'absolute',\n          bottom: 0,\n          left: 0,\n          height: 7 * grem,\n          pointerEvents: 'none',\n        }}\n      >\n        <Accuracy\n          width={ww}\n          transition_status={transition_status}\n          height={7 * grem}\n          grem={grem}\n          strategies={strategies}\n          selectRound={this.props.selectRound}\n          strategy_colors={strategy_colors}\n          strategy={strategy}\n          round={adjusted_round}\n          strategy_explored={adjusted_explored}\n          round_limit={round_limit}\n        />\n      </div>\n    )\n  }\n}\n\nexport default Footer\n","import React, { Component } from 'react'\nimport { decodeS } from './Utils'\nimport * as THREE from 'three'\nimport * as _ from 'lodash'\nimport * as d3 from 'd3'\nimport * as TWEEN from '@tweenjs/tween.js'\nimport * as chroma from 'chroma-js'\n\n/**\n *\n * @param {Array} texturesSources - List of Strings that represent texture sources\n * @returns {Array} Array containing a Promise for each source\n */\nfunction getTextures(texturesSources) {\n  const loader = new THREE.TextureLoader()\n  return texturesSources.map(textureSource => {\n    return new Promise((resolve, reject) => {\n      loader.load(\n        textureSource,\n        texture => {\n          texture.flipY = false\n          resolve(texture)\n        },\n        undefined, // onProgress callback not supported from r84\n        err => reject(err)\n      )\n    })\n  })\n}\n\n// Constants for sprite sheets\nlet sprite_side = 73\nlet sprite_size = sprite_side * sprite_side\nlet sprite_number = 12\nlet sprite_image_size = 28\n// actual sprite size needs to be power of 2\nlet sprite_actual_size = 2048\n\nlet mnist_tile_string = 'mnist_'\nlet mnist_tile_locations = [...Array(sprite_number)].map(\n  (n, i) => `${process.env.PUBLIC_URL}/${mnist_tile_string}${i}.png`\n)\nlet loader = new THREE.TextureLoader()\nlet circle_texture = loader.load(`${process.env.PUBLIC_URL}/circle.png`)\ncircle_texture.flipY = false\n\nlet ranges = []\nfor (let i = 0; i < sprite_number; i++) {\n  let start = i * sprite_size\n  let end = (i + 1) * sprite_size\n  if (i === sprite_number - 1) end = sprite_number * sprite_size\n  ranges.push([start, end])\n}\n\nlet labels = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]\n\n// let mnist_images = mnist_tile_locations.map(src => {\n//   let img = document.createElement('img')\n//   img.src = src\n//   return img\n// })\n\n// let color_array = [\n//   [141, 211, 199],\n//   [255, 255, 179],\n//   [190, 186, 218],\n//   [251, 128, 114],\n//   [128, 177, 211],\n//   [253, 180, 98],\n//   [179, 222, 105],\n//   [252, 205, 229],\n//   [188, 128, 189],\n//   [204, 235, 197],\n//   [100, 100, 100],\n// ]\nlet color_num = 10\nlet color_array = [...Array(color_num)].map((n, i) =>\n  chroma\n    .hsl(0 + (360 / color_num) * i, 1, 0.5)\n    .luminance(0.5)\n    .gl()\n)\ncolor_array.push(\n  chroma\n    .hsl(0, 0, 0.5)\n    .luminance(0.1)\n    .gl()\n)\n// console.log(color_array)\ncolor_num = 10\nlet color_array_hexes = [...Array(color_num)].map((n, i) =>\n  chroma\n    .hsl(0 + (360 / color_num) * i, 1, 0.5)\n    .luminance(0.5)\n    .hex()\n)\n\n// let status_to_color = color_array.map(a => a.map(c => c / 255))\nlet status_to_color = color_array.map(a => a.slice(0, 3))\n\nfunction sliceRound(object, range) {\n  return {\n    coordinates: object.coordinates.slice(range[0], range[1]),\n    labels: object.labels.slice(range[0], range[1]),\n    statuses: object.statuses.slice(range[0], range[1]),\n  }\n}\n\nfunction prepPositions(coordinates) {\n  let position_prep = []\n  for (let i = 0; i < coordinates.length; i++) {\n    let embedding = coordinates[i]\n    position_prep.push(embedding[0], embedding[1], 0)\n  }\n  let positions = new Float32Array(position_prep)\n  return positions\n}\n\nclass Projection extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {}\n    this.init = this.init.bind(this)\n    this.animate = this.animate.bind(this)\n    this.addPoints = this.addPoints.bind(this)\n    this.transitionPoints = this.transitionPoints.bind(this)\n    this.addSelectedPoints = this.addSelectedPoints.bind(this)\n    this.labelSelected = this.labelSelected.bind(this)\n  }\n\n  getZFromScale(scale) {\n    let rvFOV = THREE.Math.degToRad(this.camera.fov)\n    let scale_height = this.props.height / scale\n    let camera_z_position = scale_height / (2 * Math.tan(rvFOV / 2))\n    return camera_z_position\n  }\n\n  getScaleFromZ(camera_z_position) {\n    let rvFOV = THREE.Math.degToRad(this.camera.fov)\n    let half_fov_height = Math.tan(rvFOV / 2) * camera_z_position\n    let fov_height = half_fov_height * 2\n    let scale = this.props.height / fov_height\n    return scale\n  }\n\n  zoomHandler() {\n    let d3_transform = d3.event.transform\n\n    let scale = d3_transform.k\n    let x = -(d3_transform.x - this.props.width / 2) / scale\n    let y = (d3_transform.y - this.props.height / 2) / scale\n    let z = this.getZFromScale(scale)\n\n    this.camera.position.set(x, y, z)\n\n    // point size scales at end of zoom\n    // let new_size = zoomScaler(z)\n    // let point_group = this.scene.children[0].children\n    // for (let c = 0; c < point_group.length; c++) {\n    //   point_group[c].material.uniforms.size.value = new_size\n    // }\n  }\n\n  addPoints() {\n    let { loaded_embedding, embeddings } = this.props\n\n    this.scene.children[0] = new THREE.Group()\n\n    // split embeddings and labels into chunks to match sprites\n    // load the textures\n    // let loader = new THREE.TextureLoader()\n    // this.textures = mnist_tile_locations.map(l => {\n    //   let t = loader.load(l)\n    //   t.flipY = false\n    //   // t.magFilter = THREE.NearestFilter\n    //   // t.minFilter = THREE.LinearMipMapLinearFilter;\n    //   return t\n    // })\n    let loaded = embeddings[loaded_embedding]\n    let loaded_sliced = ranges.map(range => sliceRound(loaded, range))\n    let parent_group = new THREE.Group()\n\n    let slice_number = loaded_sliced.length\n    for (let s = 0; s < slice_number; s++) {\n      let slice = loaded_sliced[s]\n      let point_number = slice.coordinates.length\n\n      let geometry = new THREE.BufferGeometry()\n\n      // positions\n      let positions = prepPositions(slice.coordinates)\n\n      // offsets\n      let offsets = new Float32Array(point_number * 2)\n      for (let i = 0, index = 0, l = point_number; i < l; i++, index += 2) {\n        let x = ((i % sprite_side) * sprite_image_size) / sprite_actual_size\n        let y =\n          (Math.floor(i / sprite_side) * sprite_image_size) / sprite_actual_size\n        offsets[index] = x\n        offsets[index + 1] = y\n      }\n\n      let color_prep = slice.labels.map(label => {\n        return status_to_color[label]\n      })\n      let color_flattened = _.flatten(color_prep)\n      let colors = new Float32Array(color_flattened)\n\n      let texture_subsize = 1 / sprite_side\n\n      let texture = this.textures[s]\n      let repeat = [texture_subsize, texture_subsize]\n\n      geometry.addAttribute('position', new THREE.BufferAttribute(positions, 3))\n      geometry.addAttribute('offset', new THREE.BufferAttribute(offsets, 2))\n      geometry.addAttribute('color', new THREE.BufferAttribute(colors, 3))\n\n      // texture = circle_texture\n      // repeat = [1, 1]\n\n      let uniforms = {\n        texture: { value: texture },\n        repeat: { value: new THREE.Vector2(...repeat) },\n        size: { value: 20 },\n      }\n\n      let vertex_shader = `\n        attribute vec2 offset;\n        varying vec2 vOffset;\n        attribute vec3 color;\n        varying vec3 vColor;\n        uniform float size;\n        void main() {\n          vOffset = offset;\n          vColor = color;\n          gl_PointSize = size;\n          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n        }`\n\n      let fragment_shader = `\n        uniform sampler2D texture;\n        uniform vec2 repeat;\n        varying vec2 vOffset;\n        varying vec3 vColor;\n        void main() {\n          vec2 uv = vec2( gl_PointCoord.x, gl_PointCoord.y );\n          // vec4 tex = texture2D( texture, uv * repeat );\n          vec4 tex = texture2D( texture, uv * repeat  + vOffset);\n          if ( tex.r < 0.5 ) discard;\n          tex.r = 1.0;\n          tex.g = 1.0;\n          tex.b = 1.0;\n          gl_FragColor = tex * vec4(vColor, 1.0);\n        }`\n\n      // material\n      let material = new THREE.ShaderMaterial({\n        uniforms: uniforms,\n        vertexShader: vertex_shader,\n        fragmentShader: fragment_shader,\n      })\n\n      let point_cloud = new THREE.Points(geometry, material)\n      parent_group.add(point_cloud)\n    }\n\n    this.scene.children[0] = parent_group\n  }\n\n  transitionPoints(loaded_embedding, embeddings, transition_colors) {\n    let back_points = this.scene.children[0]\n    let existing_points = this.scene.children[1].children\n    let loaded = embeddings[loaded_embedding]\n    let loaded_sliced = ranges.map(range => sliceRound(loaded, range))\n\n    let slice_number = loaded_sliced.length\n    for (let s = 0; s < slice_number; s++) {\n      let back_existing = back_points.children[s]\n      let slice = loaded_sliced[s]\n\n      let start_position = back_existing.geometry.attributes.position.array.slice()\n      let end_position = prepPositions(slice.coordinates)\n\n      if (true || transition_colors) {\n        let start_colors = back_existing.geometry.attributes.color.array.slice()\n        let color_prep = slice.labels.map(label => {\n          let color = status_to_color[label]\n          return color\n        })\n        let color_flattened = _.flatten(color_prep)\n        let end_colors = new Float32Array(color_flattened)\n\n        let color_tween = new TWEEN.Tween(start_colors)\n          .to(end_colors, 400)\n          .easing(TWEEN.Easing.Linear.None)\n        color_tween.onUpdate(function() {\n          back_existing.geometry.attributes.color.array = start_colors\n          back_existing.geometry.attributes.color.needsUpdate = true\n        })\n        color_tween.delay(400)\n\n        let position_tween = new TWEEN.Tween(start_position)\n          .to(end_position, 800)\n          .easing(TWEEN.Easing.Linear.None)\n        position_tween.onUpdate(function() {\n          back_existing.geometry.attributes.position.array = start_position\n          back_existing.geometry.attributes.position.needsUpdate = true\n        })\n        position_tween.start().chain(color_tween)\n\n        // let combo_tween = new TWEEN.Tween(combo_start)\n        //   .to(combo_end, 800)\n        //   .easing(TWEEN.Easing.Linear.None)\n        // combo_tween.onUpdate(function() {\n        //   if (s === 0) {\n        //     console.log(combo_start.positions[0])\n        //   }\n        //   back_existing.geometry.attributes.color.array = combo_start.colors\n        //   back_existing.geometry.attributes.color.needsUpdate = true\n        //   back_existing.geometry.attributes.position.array =\n        //     combo_start.positions\n        //   back_existing.geometry.attributes.position.needsUpdate = true\n        // })\n        // combo_tween.start()\n      } else {\n        let position_tween = new TWEEN.Tween(start_position)\n          .to(end_position, 800)\n          .easing(TWEEN.Easing.Linear.None)\n        position_tween.onUpdate(function() {\n          back_existing.geometry.attributes.position.array = start_position\n          back_existing.geometry.attributes.position.needsUpdate = true\n        })\n        position_tween.start()\n      }\n\n      // selected\n      let existing = existing_points[s]\n      let indexes = Array.from(existing.geometry.attributes.indexes.array)\n\n      let sel_start_positions = existing.geometry.attributes.position.array.slice()\n      let sel_end_position_prep = indexes.map(i => {\n        let coord = slice.coordinates[i]\n        return coord\n      })\n      let end_flattened = prepPositions(sel_end_position_prep)\n      let sel_end_position = new Float32Array(end_flattened)\n\n      let size = { value: 20 }\n      let end_size = { value: 0 }\n      let me = this\n      let size_tween = new TWEEN.Tween(size)\n        .to(end_size, 400)\n        .easing(TWEEN.Easing.Linear.None)\n        .delay(400)\n        .onComplete(() => {\n          // hack to just run once\n          if (s === 0) {\n            me.addSelectedPoints()\n            me.props.setTransitionStatus(0.5)\n          }\n        })\n      size_tween.onUpdate(function() {\n        existing.material.uniforms.size = size\n      })\n\n      let sel_position_tween = new TWEEN.Tween(sel_start_positions)\n        .to(sel_end_position, 800)\n        .easing(TWEEN.Easing.Linear.None)\n      sel_position_tween.onUpdate(function() {\n        existing.geometry.attributes.position.array = sel_start_positions\n        existing.geometry.attributes.position.needsUpdate = true\n      })\n      sel_position_tween.onComplete(() => {\n        if (s === 0) {\n          setTimeout(() => {\n            if (existing.material.uniforms.size.value > 0) {\n              me.props.setTransitionStatus(2.6)\n            } else {\n              me.addSelectedPoints()\n              me.props.setTransitionStatus(0)\n            }\n          }, 0)\n        }\n      })\n      if (existing.material.uniforms.size.value > 0) {\n        sel_position_tween.chain(size_tween)\n      } else {\n        // existing.material.uniforms.size.value = 20\n      }\n      sel_position_tween.start()\n    }\n  }\n\n  addSelectedPoints() {\n    let { loaded_embedding, embeddings } = this.props\n\n    this.scene.children[1] = new THREE.Group()\n\n    let loaded = embeddings[loaded_embedding]\n\n    let loaded_sliced = ranges.map(range => sliceRound(loaded, range))\n\n    let parent_group = new THREE.Group()\n\n    let slice_number = loaded_sliced.length\n    for (let s = 0; s < slice_number; s++) {\n      let slice = loaded_sliced[s]\n\n      let indexes = []\n      for (let i = 0; i < slice.statuses.length; i++) {\n        if (slice.statuses[i] === 1) {\n          indexes.push(i)\n        }\n      }\n      let attribute_indexes = new Float32Array(indexes)\n\n      let point_number = indexes.length\n\n      let geometry = new THREE.BufferGeometry()\n\n      // positions\n      let positions = prepPositions(indexes.map(i => slice.coordinates[i]))\n\n      // offsets\n      let offsets = new Float32Array(point_number * 2)\n      for (let i = 0, index = 0, l = point_number; i < l; i++, index += 2) {\n        let loc_index = indexes[i]\n        let x =\n          ((loc_index % sprite_side) * sprite_image_size) / sprite_actual_size\n        let y =\n          (Math.floor(loc_index / sprite_side) * sprite_image_size) /\n          sprite_actual_size\n        offsets[index] = x\n        offsets[index + 1] = y\n      }\n\n      let color_prep = indexes.map(i => {\n        return [1, 1, 1]\n      })\n      let color_flattened = _.flatten(color_prep)\n      let colors = new Float32Array(color_flattened)\n\n      let texture_subsize = 1 / sprite_side\n\n      let texture = this.textures[s]\n      let repeat = [texture_subsize, texture_subsize]\n\n      geometry.addAttribute('position', new THREE.BufferAttribute(positions, 3))\n      geometry.addAttribute('offset', new THREE.BufferAttribute(offsets, 2))\n      geometry.addAttribute('color', new THREE.BufferAttribute(colors, 3))\n      geometry.addAttribute(\n        'indexes',\n        new THREE.BufferAttribute(attribute_indexes, 1)\n      )\n\n      // texture = circle_texture\n      // repeat = [1, 1]\n\n      let uniforms = {\n        texture: { value: texture },\n        repeat: { value: new THREE.Vector2(...repeat) },\n        size: { value: 0 },\n      }\n\n      let vertex_shader = `\n        attribute vec2 offset;\n        varying vec2 vOffset;\n        attribute vec3 color;\n        varying vec3 vColor;\n        uniform float size;\n        void main() {\n          vOffset = offset;\n          vColor = color;\n          gl_PointSize = size;\n          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n        }`\n\n      let fragment_shader = `\n        uniform sampler2D texture;\n        uniform vec2 repeat;\n        varying vec2 vOffset;\n        varying vec3 vColor;\n        void main() {\n          vec2 uv = vec2( gl_PointCoord.x, gl_PointCoord.y );\n          // vec4 tex = texture2D( texture, uv * repeat );\n          vec4 tex = texture2D( texture, uv * repeat + vOffset );\n          if ( tex.r < 0.5 ) discard;\n          tex.r = 1.0;\n          tex.g = 1.0;\n          tex.b = 1.0;\n          gl_FragColor = tex * vec4(vColor, 1.0);\n        }`\n\n      // material\n      let material = new THREE.ShaderMaterial({\n        uniforms: uniforms,\n        vertexShader: vertex_shader,\n        fragmentShader: fragment_shader,\n      })\n\n      let point_cloud = new THREE.Points(geometry, material)\n      parent_group.add(point_cloud)\n    }\n\n    this.scene.children[1] = parent_group\n    // this.scene.children[1].visible = false\n  }\n\n  revealSelected() {\n    let size = { value: 0 }\n    let end_size = { value: 20 }\n    let groups = this.scene.children[1].children\n    for (let g = 0; g < groups.length; g++) {\n      let points = groups[g]\n      let size_tween = new TWEEN.Tween(size)\n        .to(end_size, 400)\n        .easing(TWEEN.Easing.Linear.None)\n      size_tween.onUpdate(function() {\n        points.material.uniforms.size = size\n      })\n      let me = this\n      size_tween.onComplete(function() {\n        if (g === 0) {\n          me.props.setTransitionStatus(1)\n        }\n      })\n      size_tween.start()\n    }\n\n    // let opacity = { value: 0 }\n    // let end_opacity = { value: 1 }\n    // for (let g = 0; g < groups.length; g++) {\n    //   let points = groups[g]\n    //   points.material.uniforms.size = { value: 20 }\n    //   let opacity_tween = new TWEEN.Tween(opacity)\n    //     .to(end_opacity, 800)\n    //     .easing(TWEEN.Easing.Linear.None)\n    //   opacity_tween.onUpdate(function() {\n    //     console.log(opacity.value)\n    //     points.material.opacity = opacity.value\n    //   })\n    //   let me = this\n    //   opacity_tween.onComplete(function() {\n    //     if (g === 0) {\n    //       me.props.setTransitionStatus(1)\n    //     }\n    //   })\n    //   opacity_tween.start()\n    // }\n  }\n\n  labelSelected() {\n    let { loaded_embedding, embeddings } = this.props\n\n    let loaded = embeddings[loaded_embedding]\n\n    let loaded_sliced = ranges.map(range => sliceRound(loaded, range))\n\n    let existing_points = this.scene.children[1].children\n\n    for (let s = 0; s < loaded_sliced.length; s++) {\n      let slice = loaded_sliced[s]\n      let existing = existing_points[s]\n\n      let indexes = Array.from(existing.geometry.attributes.indexes.array)\n\n      let start_colors = existing_points[\n        s\n      ].geometry.attributes.color.array.slice()\n\n      let color_prep = indexes.map(i => {\n        let label = slice.labels[i]\n        let color = status_to_color[label]\n        return color\n      })\n      let color_flattened = _.flatten(color_prep)\n      let end_colors = new Float32Array(color_flattened)\n\n      let color_tween = new TWEEN.Tween(start_colors)\n        .to(end_colors, 400)\n        .easing(TWEEN.Easing.Linear.None)\n      let points = existing_points[s]\n      color_tween.onUpdate(function() {\n        points.geometry.attributes.color.array = start_colors\n        points.geometry.attributes.color.needsUpdate = true\n      })\n      let me = this\n      color_tween.onComplete(function() {\n        if (s === 0) {\n          setTimeout(function() {\n            me.props.setTransitionStatus(2.3)\n          }, 0)\n        }\n      })\n      color_tween.start()\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    if (\n      prevProps.loaded_embedding === null &&\n      this.props.loaded_embedding !== null\n    ) {\n      // first load\n      Promise.all(getTextures(mnist_tile_locations)).then(textures => {\n        this.textures = textures\n        this.addPoints()\n        this.addSelectedPoints()\n        this.props.setTransitionStatus(0.5)\n      })\n    } else if (prevProps.loaded_embedding !== this.props.loaded_embedding) {\n      //   // embeddings have changed\n      let prevd = decodeS(prevProps.loaded_embedding)\n      let d = decodeS(this.props.loaded_embedding)\n      if (prevd.dataset !== d.dataset) {\n        // different dataset\n        console.log('different dataset')\n        // this.addPoints()\n      } else if (prevd.strategy !== d.strategy) {\n        // new strategy, we should transition\n        // new strategy, who dis\n        // if (this.props.transition_status === 1) {\n        // this.labelSelected()\n        // }\n        this.transitionPoints(\n          this.props.loaded_embedding,\n          this.props.embeddings,\n          true\n        )\n      } else if (\n        prevd.round !== d.round &&\n        this.props.transition_status !== 1.5\n      ) {\n        this.transitionPoints(\n          this.props.loaded_embedding,\n          this.props.embeddings\n        )\n      }\n    } else if (\n      (this.props.transition_status === 0.5 &&\n        prevProps.transition_status === 0) ||\n      (this.props.transition_status === 0.5 &&\n        prevProps.transition_status === 2.6)\n    ) {\n      this.revealSelected()\n    } else if (\n      // probably a race condition here\n      this.props.transition_status === 2 &&\n      prevProps.transition_status === 1.5\n    ) {\n      this.labelSelected(this.props.loaded_embedding, this.props.embeddings)\n    } else if (\n      this.props.transition_status === 2.3 &&\n      prevProps.transition_status === 2\n    ) {\n      this.transitionPoints(this.props.loaded_embedding, this.props.embeddings)\n    } else if (this.props.round !== prevProps.round) {\n    }\n  }\n\n  init() {\n    let { width, height } = this.props\n\n    this.scene = new THREE.Scene()\n\n    let vFOV = 75\n    let aspect = width / height\n    let near = 0.01\n    let far = 1000\n\n    this.camera = new THREE.PerspectiveCamera(vFOV, aspect, near, far)\n\n    this.camera.position.z = 30\n\n    this.renderer = new THREE.WebGLRenderer()\n    this.renderer.setClearColor(0x111111, 1)\n    this.renderer.setSize(width, height)\n    this.mount.appendChild(this.renderer.domElement)\n\n    let point_group = new THREE.Group()\n    this.scene.add(point_group)\n    let selected_point_group = new THREE.Group()\n    this.scene.add(selected_point_group)\n\n    this.d3_zoom = d3\n      .zoom()\n      .scaleExtent([this.getScaleFromZ(far - 1), this.getScaleFromZ(0.1)])\n      .on('zoom', this.zoomHandler.bind(this))\n\n    let view = d3.select(this.mount)\n    this.view = view\n    view.call(this.d3_zoom)\n    let initial_scale = this.getScaleFromZ(this.camera.position.z)\n    var initial_transform = d3.zoomIdentity\n      .translate(width / 2, height / 2)\n      .scale(initial_scale)\n    this.d3_zoom.transform(view, initial_transform)\n\n    this.animate()\n  }\n\n  animate() {\n    requestAnimationFrame(this.animate)\n    TWEEN.update()\n    this.renderer.sortObjects = false\n    this.renderer.render(this.scene, this.camera)\n  }\n\n  componentDidMount() {\n    this.init()\n  }\n\n  componentWillUnmount() {\n    this.mount.removeChild(this.renderer.domElement)\n  }\n\n  render() {\n    let { width, height, grem } = this.props\n    return (\n      <div\n        style={{\n          position: 'absolute',\n          left: 0,\n          width: width,\n          height: height,\n          background: '#222',\n          overflow: 'hidden',\n        }}\n        grem={grem}\n      >\n        <div\n          style={{\n            position: 'absolute',\n            left: 0,\n            top: 0,\n            width: width,\n            height: height,\n          }}\n          ref={mount => {\n            this.mount = mount\n          }}\n        />\n        <div\n          style={{\n            background: 'transparent',\n            display: 'flex',\n            flexWrap: 'auto',\n            padding: `0 ${grem / 4}px`,\n            position: 'absolute',\n            left: 0,\n            bottom: this.props.footer_height + grem,\n          }}\n        >\n          <div style={{ padding: `0 ${grem / 4}px` }}>Labels:</div>\n          <div\n            style={{\n              background: '#888',\n              color: '#111',\n              width: grem,\n              height: grem,\n              textAlign: 'center',\n            }}\n          >\n            ?\n          </div>\n          {color_array_hexes.map((c, i) => (\n            <div\n              key={'color_' + i}\n              style={{\n                background: color_array_hexes[i],\n                height: grem,\n                textAlign: 'center',\n                color: '#111',\n                width: grem,\n              }}\n            >\n              {i}\n            </div>\n          ))}\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Projection\n","import React, { Component } from 'react'\nimport Header from './Header'\nimport Footer from './Footer'\nimport { activeStyle } from './Utils'\nimport ProjectionSelected from './ProjectionSelected'\nimport BigButton from './BigButton'\nimport Timer from './Timer'\nimport * as chroma from 'chroma-js'\n\n// let strategy_colors = ['#1b9e77', '#d95f02', '#7570b3', '#e7298a']\n\nlet color_num = 4\nlet strategy_colors = [...Array(color_num)].map((n, i) =>\n  chroma\n    .hsl(-45 + (90 / color_num) * i, 1, 0.5)\n    .luminance(0.5)\n    .hex()\n)\n\n// fixme: this duplicates projection\nlet sprite_side = 73\nlet sprite_size = sprite_side * sprite_side\nlet sprite_number = 12\nlet sprite_image_size = 28\n// actual sprite size needs to be power of 2\nlet sprite_actual_size = 2048\n\nlet ranges = []\nfor (let i = 0; i < sprite_number; i++) {\n  let start = i * sprite_size\n  let end = (i + 1) * sprite_size\n  if (i === sprite_number - 1) end = sprite_number * sprite_size\n  ranges.push([start, end])\n}\n\nlet mnist_tile_string = 'mnist_'\nlet mnist_tile_locations = [...Array(sprite_number)].map(\n  (n, i) => `${process.env.PUBLIC_URL}/${mnist_tile_string}${i}.png`\n)\nlet mnist_images = mnist_tile_locations.map(src => {\n  let img = document.createElement('img')\n  img.src = src\n  return img\n})\n\ncolor_num = 10\nlet color_array_hexes = [...Array(color_num)].map((n, i) =>\n  chroma\n    .hsl(0 + (360 / color_num) * i, 1, 0.5)\n    .luminance(0.5)\n    .hex()\n)\nlet gradient_string = color_array_hexes.reduce((total, curr, i) => {\n  return (\n    total +\n    curr +\n    ' ' +\n    Math.round((i / color_num) * 100) +\n    (i === color_num - 1 ? '%' : '%, ')\n  )\n}, '')\n\nlet transition_timings = [400]\n\n// let strategy_colors = ['#66c2a5','#fc8d62','#8da0cb','#e78ac3']\n\nclass Layout extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      ww: null,\n      wh: null,\n      header_height: null,\n      footer_height: null,\n      transition_status: 0,\n      loading_round: false,\n      simulating_labeling: false,\n    }\n    this.setSize = this.setSize.bind(this)\n    this.setHeaderHeight = this.setHeaderHeight.bind(this)\n    this.setFooterHeight = this.setFooterHeight.bind(this)\n    this.setTransitionStatus = this.setTransitionStatus.bind(this)\n    this.labelsGotten = this.labelsGotten.bind(this)\n  }\n\n  setHeaderHeight(height) {\n    this.setState({ header_height: height })\n  }\n\n  setFooterHeight(height) {\n    this.setState({ footer_height: height })\n  }\n\n  setSize() {\n    this.setState({ ww: window.innerWidth, wh: window.innerHeight })\n  }\n\n  componentWillMount() {\n    this.setSize()\n  }\n\n  componentDidMount() {\n    window.addEventListener('resize', this.setSize)\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (\n      this.state.loading_round === true &&\n      prevProps.loaded_embedding !== this.props.loaded_embedding\n    ) {\n      this.setState({ loading_round: false })\n    }\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.setSize)\n  }\n\n  setTransitionStatus(status) {\n    if (status === 1.5) {\n      this.setState({ transition_status: status, simulating_labeling: true })\n      this.props.selectRound(this.props.round + 1)\n    } else {\n      this.setState({ transition_status: status })\n    }\n  }\n\n  labelsGotten() {\n    this.setState({\n      transition_status: 2,\n      loading_round: true,\n      simulating_labeling: false,\n    })\n  }\n\n  render() {\n    let {\n      ww,\n      wh,\n      header_height,\n      footer_height,\n      loading_round,\n      simulating_labeling,\n      transition_status,\n    } = this.state\n    let {\n      dataset,\n      strategy,\n      round,\n      datasets,\n      strategies,\n      selectDataset,\n      selectStrategy,\n      embeddings,\n      requested_embedding,\n      loaded_embedding,\n      strategy_explored,\n    } = this.props\n\n    let font_size = 14\n    let line_height = 1.5\n    let grem = font_size * line_height\n\n    let round_limit = 7\n\n    return ww === null ? (\n      <div style={{ padding: grem / 4 }}>Loading layout...</div>\n    ) : (\n      <div\n        style={{\n          width: ww,\n          height: wh,\n          overflow: 'hidden',\n          position: 'relative',\n        }}\n      >\n        <>\n          <div\n            style={{\n              position: 'fixed',\n              top: 0,\n              right: 0,\n              padding: grem / 2,\n              zIndex: 999,\n              background: 'red',\n              display: 'none',\n            }}\n          >\n            {transition_status}\n          </div>\n          {footer_height !== null && header_height !== null ? (\n            <div\n              style={{\n                background: 'white',\n                height: wh,\n              }}\n            >\n              <ProjectionSelected\n                width={ww}\n                height={wh}\n                grem={grem}\n                strategies={strategies}\n                strategy_colors={strategy_colors}\n                strategy={strategy}\n                embeddings={embeddings}\n                requested_embedding={requested_embedding}\n                loaded_embedding={loaded_embedding}\n                loading_round={loading_round}\n                mnist_images={mnist_images}\n                ranges={ranges}\n                transition_status={this.state.transition_status}\n                setTransitionStatus={this.setTransitionStatus}\n                footer_height={footer_height}\n                round={round}\n                header_height={header_height}\n                round_limit={round_limit}\n              />\n            </div>\n          ) : null}\n          {footer_height !== null ? (\n            <BigButton\n              transition_status={this.state.transition_status}\n              grem={grem}\n              footer_height={footer_height}\n              setTransitionStatus={this.setTransitionStatus}\n              round_limit={round_limit}\n              round={round}\n            />\n          ) : null}\n          <Header\n            datasets={datasets}\n            selectDataset={selectDataset}\n            strategies={strategies}\n            strategy={strategy}\n            strategy_colors={strategy_colors}\n            selectStrategy={selectStrategy}\n            dataset={dataset}\n            activeStyle={activeStyle}\n            setHeaderHeight={this.setHeaderHeight}\n            gradient_string={gradient_string}\n            grem={grem}\n            transition_status={this.state.transition_status}\n          />\n          {header_height !== null ? (\n            <Footer\n              round={round}\n              ww={ww}\n              grem={grem}\n              strategies={strategies}\n              strategy_colors={strategy_colors}\n              strategy={strategy}\n              setFooterHeight={this.setFooterHeight}\n              selectRound={this.props.selectRound}\n              gradient_string={gradient_string}\n              color_array_hexes={color_array_hexes}\n              transition_status={this.state.transition_status}\n              setTransitionStatus={this.setTransitionStatus}\n              simulating_labeling={simulating_labeling}\n              strategy_explored={strategy_explored}\n              round_limit={round_limit}\n            />\n          ) : null}\n          {this.state.simulating_labeling ? (\n            <div\n              style={{\n                position: 'fixed',\n                left: 0,\n                top: 0,\n                width: '100vw',\n                height: '100vh',\n                display: 'grid',\n                justifyItems: 'center',\n                alignItems: 'center',\n              }}\n            >\n              <div\n                style={{\n                  width: Math.min(500, ww),\n                  background: '#666',\n                  padding: grem,\n                }}\n              >\n                <div>Getting labels for 1,000 selected points...</div>\n                <Timer\n                  grem={grem}\n                  gradient_string={gradient_string}\n                  ww={ww}\n                  labelsGotten={this.labelsGotten}\n                />\n              </div>\n            </div>\n          ) : null}\n        </>\n      </div>\n    )\n  }\n}\n\nexport default Layout\n","import React, { Component } from 'react'\nimport * as chroma from 'chroma-js'\n\nlet image_num = 40\nlet images = [...Array(40)].map(n => null)\n\n// fixme: this duplicates projection\nlet sprite_side = 73\nlet sprite_size = sprite_side * sprite_side\nlet sprite_number = 12\nlet sprite_image_size = 28\n// actual sprite size needs to be power of 2\nlet sprite_actual_size = 2048\n\nlet mnist_tile_string = 'mnist_'\nlet mnist_tile_locations = [...Array(sprite_number)].map(\n  (n, i) => `${process.env.PUBLIC_URL}/${mnist_tile_string}${i}.png`\n)\n\nlet color_num = 10\nlet status_to_color = [...Array(color_num)].map((n, i) =>\n  chroma\n    .hsl(0 + (360 / color_num) * i, 1, 0.5)\n    .luminance(0.5)\n    .hex()\n)\n\nclass Selected extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      labels: null,\n      prev_loaded: null,\n    }\n  }\n\n  componentDidUpdate(prevProps) {\n    let { embeddings } = this.props\n\n    if (this.props.loaded_embedding !== prevProps.loaded_embedding) {\n      if (prevProps.loaded_embedding === null) {\n        // first real loaded set the state\n        this.setState({ prev_loaded: this.props.loaded_embedding })\n      } else {\n        // use the statuses from previous\n        let prev_embeddings = embeddings[prevProps.loaded_embedding]\n        let selected_indexes = []\n        for (let i = 0; i < prev_embeddings.statuses.length; i++) {\n          if (prev_embeddings.statuses[i] === 1) {\n            selected_indexes.push(i)\n          }\n        }\n        let loaded = embeddings[this.props.loaded_embedding]\n        let new_labels = selected_indexes.map((n, i) => loaded.labels[n])\n        this.setState({ labels: new_labels })\n      }\n    }\n    if (\n      this.props.transition_status === 0.5 &&\n      prevProps.transition_status !== 0\n    ) {\n      // need to make this run in between\n      let me = this\n      setTimeout(() => {\n        me.setState({\n          prev_loaded: this.props.loaded_embedding,\n          labels: null,\n        })\n      }, 0)\n    }\n  }\n\n  render() {\n    let {\n      width,\n      height,\n      grem,\n      embeddings,\n      loaded_embedding,\n      transition_status,\n      header_height,\n      round,\n      round_limit,\n    } = this.props\n\n    let selected_indexes = []\n    // let loaded = embeddings[loaded_embedding]\n    let loaded = embeddings[this.state.prev_loaded]\n    if (loaded) {\n      for (let i = 0; i < loaded.statuses.length; i++) {\n        if (loaded.statuses[i] === 1) {\n          selected_indexes.push(i)\n        }\n      }\n    }\n\n    let grid_columns = 4\n    let gutter = grem / 4\n    let side_padding = grem / 4\n    let image_width =\n      (width - side_padding * 2 * 2 - gutter * (grid_columns - 1)) /\n      grid_columns\n    let image_height = image_width\n\n    let image_pickers = selected_indexes.map(loc_index => {\n      let sprite_num = Math.floor(loc_index / sprite_size)\n      let sprite_index = loc_index % sprite_size\n      let column = sprite_index % sprite_side\n      let row = Math.floor(sprite_index / sprite_side)\n      return [sprite_num, column, row]\n    })\n\n    let selected_labels = null\n    if (loaded_embedding !== null) {\n      selected_labels = selected_indexes.map(\n        (n, i) => embeddings[loaded_embedding].labels[i]\n      )\n    }\n\n    let scale = image_width / sprite_image_size\n\n    let adjusted_round = round\n    if (transition_status > 1 && transition_status < 2.3)\n      adjusted_round = Math.max(0, adjusted_round - 1)\n\n    return (\n      <div\n        style={{\n          position: 'absolute',\n          right: 0,\n          top: header_height,\n          width: width,\n          height: height,\n          background: '#333',\n          overflow: 'hidden',\n        }}\n      >\n        {transition_status === 0 ? (\n          <div\n            style={{\n              padding: grem / 4,\n            }}\n          >\n            <div\n              style={{\n                padding: grem / 4,\n              }}\n            >\n              Use the select data button below to select data points based on\n              the strategy.\n            </div>\n          </div>\n        ) : null}\n        <div\n          style={{\n            opacity:\n              transition_status === 0 ||\n              transition_status === 2.6 ||\n              round_limit === adjusted_round\n                ? 0\n                : 1,\n            transition: 'opacity 0.4s linear',\n            transitionDelay: '0.1s',\n            padding: grem / 2,\n            position: 'relative',\n          }}\n        >\n          <div\n            style={{\n              display: 'flex',\n              justifyContent: 'space-between',\n              position: 'absolute',\n              left: 0,\n              top: 0,\n              width: width,\n              background: '#444',\n              padding: `${grem / 4}px ${grem / 2}px`,\n            }}\n          >\n            <div>{transition_status < 2 ? 'Selected' : 'Labeled'}:</div>\n            <div>1,000</div>\n          </div>\n          <div\n            style={{\n              right: 0,\n              top: header_height,\n              width: width,\n              height: height - grem / 2,\n              paddingTop: grem * 1,\n              background: '#333',\n              overflow: 'auto',\n            }}\n          >\n            <div\n              style={{\n                display: 'grid',\n                paddingTop: side_padding * 2,\n                paddingBottom: side_padding * 2,\n                gridTemplateColumns: `repeat(${grid_columns}, ${image_width}px)`,\n                gridColumnGap: gutter,\n                gridRowGap: gutter * 2,\n              }}\n            >\n              {image_pickers.length > 0\n                ? image_pickers.map((p, i) => {\n                    let label =\n                      this.state.labels !== null &&\n                      this.props.transition_status > 1.5\n                        ? this.state.labels[i]\n                        : '?'\n                    let background =\n                      this.state.labels !== null &&\n                      this.props.transition_status > 1.5\n                        ? status_to_color[this.state.labels[i]]\n                        : '#fff'\n                    return (\n                      <div\n                        key={p}\n                        style={{\n                          width: image_width,\n                          height: image_height + grem,\n                          background: background,\n                          color: '#111',\n                          textAlign: 'center',\n                          transition: 'background 400ms linear',\n                        }}\n                      >\n                        <div\n                          style={{\n                            backgroundImage: `url(${\n                              mnist_tile_locations[p[0]]\n                            })`,\n                            backgroundSize: `${scale *\n                              sprite_actual_size}px ${scale *\n                              sprite_actual_size}px`,\n                            backgroundPosition: `-${p[1] *\n                              scale *\n                              sprite_image_size}px -${p[2] *\n                              scale *\n                              sprite_image_size}px`,\n                            width: image_width,\n                            height: image_height,\n                            imageRendering: 'pixelated',\n                          }}\n                        />\n                        <div>{label}</div>\n                      </div>\n                    )\n                  })\n                : null}\n            </div>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Selected\n","import React, { Component } from 'react'\nimport Projection from './Projection'\nimport Selected from './Selected'\n\nclass ProjectionSelected extends Component {\n  render() {\n    let {\n      width,\n      height,\n      grem,\n      strategies,\n      strategy_colors,\n      strategy,\n      active_embedding,\n      requested_embedding,\n      loaded_embedding,\n      embeddings,\n      mnist_images,\n      ranges,\n      transition_status,\n      setTransitionStatus,\n      loading_round,\n      header_height,\n      footer_height,\n      round,\n      round_limit,\n    } = this.props\n\n    let selected_width = 200\n    return (\n      <div style={{ position: 'relative' }}>\n        <Projection\n          width={width}\n          height={height}\n          grem={grem}\n          active_embedding={active_embedding}\n          strategies={strategies}\n          strategy_colors={strategy_colors}\n          strategy={strategy}\n          embeddings={embeddings}\n          requested_embedding={requested_embedding}\n          loaded_embedding={loaded_embedding}\n          transition_status={transition_status}\n          setTransitionStatus={setTransitionStatus}\n          loading_round={loading_round}\n          footer_height={footer_height}\n          round={round}\n        />\n        {true ? (\n          <Selected\n            width={selected_width}\n            height={\n              height - this.props.footer_height - grem * 2 - header_height\n            }\n            grem={grem}\n            mnist_images={mnist_images}\n            embeddings={embeddings}\n            loaded_embedding={loaded_embedding}\n            ranges={ranges}\n            transition_status={transition_status}\n            header_height={header_height}\n            round={round}\n            round_limit={round_limit}\n          />\n        ) : null}\n      </div>\n    )\n  }\n}\n\nexport default ProjectionSelected\n","import React, { Component } from 'react'\n\nclass BigButton extends Component {\n  render() {\n    let { transition_status, grem, round_limit, round } = this.props\n\n    let button_text\n    let next_state\n    if (transition_status === 0) {\n      button_text = 'Loading...'\n      next_state = null\n    } else if (transition_status === 0.5) {\n      button_text = 'Selecting...'\n      next_state = null\n    } else if (transition_status === 1) {\n      button_text = 'Label & train'\n      next_state = 1.5\n    } else if (transition_status === 1.5) {\n      button_text = 'Labeling...'\n      next_state = null\n    } else if (transition_status === 2) {\n      button_text = 'Training...'\n      next_state = null\n    } else if (transition_status === 2.3) {\n      button_text = 'Training...'\n      next_state = null\n    } else if (transition_status === 2.6) {\n      button_text = 'Deselecting...'\n      next_state = null\n    }\n\n    let adjusted_round = round\n    if (transition_status > 1 && transition_status < 2.3)\n      adjusted_round = Math.max(0, adjusted_round - 1)\n\n    return (\n      <div\n        style={{\n          display: 'flex',\n          justifyContent: 'space-between',\n          background: '#111',\n          position: 'absolute',\n          bottom: this.props.footer_height,\n          right: 0,\n        }}\n      >\n        <div>\n          {round_limit !== adjusted_round ? (\n            <button\n              style={{\n                width: 200,\n                height: 2 * grem,\n                background: next_state === null ? '#eee' : 'white',\n                color: 'black',\n                textAlign: 'left',\n                paddingLeft: grem / 2,\n                cursor: next_state === null ? 'default' : 'pointer',\n                textDecoration: next_state === null ? 'none' : 'underline',\n              }}\n              disabled={next_state === null}\n              onClick={() => {\n                if (next_state !== null) {\n                  this.props.setTransitionStatus(next_state)\n                }\n              }}\n            >\n              {button_text}\n            </button>\n          ) : null}\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default BigButton\n","import React, { Component } from 'react'\n\nclass Timer extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      count: 0,\n    }\n  }\n\n  componentDidMount() {\n    let counter = 0\n    let count = 0\n    let me = this\n    function repeatOften() {\n      counter += 25\n      let count_check = Math.floor(counter)\n      if (count_check !== count) {\n        count = count_check\n      }\n      me.setState({ count: count })\n      if (count < 1000) {\n        requestAnimationFrame(repeatOften)\n      } else {\n        setTimeout(() => {\n          me.props.labelsGotten()\n        }, 200)\n      }\n    }\n    setTimeout(() => requestAnimationFrame(repeatOften), 200)\n  }\n\n  render() {\n    let { grem, ww } = this.props\n    return (\n      <div>\n        <div\n          style={{\n            height: grem,\n            width: `${100}%`,\n            marginTop: grem / 2,\n            background: '#222',\n          }}\n        >\n          <div\n            style={{\n              height: grem,\n              width: `${(this.state.count / 1000) * 100}%`,\n              overflow: 'hidden',\n            }}\n          >\n            <div\n              style={{\n                height: grem,\n                width: Math.min(500, ww) - grem * 2,\n                background: `linear-gradient(to right, ${\n                  this.props.gradient_string\n                })`,\n              }}\n            />\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Timer\n","import React, { Component } from 'react'\nimport Layout from './Layout'\nimport * as _ from 'lodash'\nimport * as d3 from 'd3'\n\nlet datasets = ['MNIST', 'Quickdraw', 'Caltech']\nlet strategies = ['random', 'entropy', 'adversarial', 'ensemble']\n\nlet mnist_strategy_url = [\n  'mnist_random_round',\n  'mnist_entropy_round',\n  'mnist_adv_round',\n  'mnist_ensemble_entropy_round',\n]\n\nfunction es(dataset, strategy, round) {\n  return `${dataset}-${strategy}-${round}`\n}\n\n// range key ref: [init_embeddings, selected_embeddings, unselected_embeddings]\n\nclass Data extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      embeddings: {},\n      dataset: datasets[0],\n      strategy: strategies[1],\n      round: 0,\n      requested_embedding: null,\n      loaded_embedding: null,\n      strategy_explored: 0,\n    }\n    this.scaleEmbeddings = this.scaleEmbeddings.bind(this)\n    this.fetchData = this.fetchData.bind(this)\n    this.checkOrFetchData = this.checkOrFetchData.bind(this)\n    this.selectRound = this.selectRound.bind(this)\n  }\n\n  selectRound(round) {\n    let strat_limit = Math.max(this.state.strategy_explored, round)\n    this.setState({ round: round, strategy_explored: strat_limit })\n    this.checkOrFetchData(this.state.dataset, this.state.strategy, round)\n  }\n\n  selectDataset(index) {\n    this.setState({ dataset: datasets[index], strategy_explored: 0 })\n    this.checkOrFetchData(\n      datasets[index],\n      this.state.strategy,\n      this.state.round\n    )\n  }\n\n  selectStrategy(index) {\n    this.setState({ strategy: strategies[index] })\n    this.checkOrFetchData(\n      this.state.dataset,\n      strategies[index],\n      this.state.round\n    )\n  }\n\n  checkOrFetchData(dataset, strategy, round) {\n    let { embeddings } = this.state\n    let string = es(dataset, strategy, round)\n    this.setState({ requested_embedding: string })\n    if (embeddings[string] !== undefined) {\n      this.setState({ loaded_embedding: string })\n    } else {\n      this.fetchData(dataset, strategy, round)\n    }\n  }\n\n  scaleEmbeddings(embeddings) {\n    let xs = embeddings.map(e => Math.abs(e[0]))\n    let ys = embeddings.map(e => Math.abs(e[1]))\n    let max_x = _.max(xs)\n    let max_y = _.max(ys)\n    let max = Math.max(max_x, max_y)\n    let scale = d3\n      .scaleLinear()\n      .domain([-max, max])\n      .range([-20, 20])\n    let scaled_embeddings = embeddings.map(e => [scale(e[0]), scale(e[1])])\n    return scaled_embeddings\n  }\n\n  fetchData(dataset, strategy, round) {\n    let url = `${process.env.PUBLIC_URL}/${\n      mnist_strategy_url[strategies.indexOf(strategy)]\n    }${round}.json`\n    fetch(url)\n      .then(response => response.json())\n      .then(r => {\n        // calculate embedding scale for all\n        let coordinates = r.coordinates\n        let xs = coordinates.map(e => Math.abs(e[0]))\n        let ys = coordinates.map(e => Math.abs(e[1]))\n        let max_x = _.max(xs)\n        let max_y = _.max(ys)\n        let max = Math.max(max_x, max_y)\n        let scale = d3\n          .scaleLinear()\n          .domain([-max, max])\n          .range([-20, 20])\n        let scaled = coordinates.map(e => [scale(e[0]), scale(e[1])])\n        let object = {}\n        object.coordinates = scaled\n        object.statuses = r.status\n        object.labels = r.labels\n        let embedding_string = es(dataset, strategy, round)\n        this.setState({\n          loaded_embedding: embedding_string,\n          embeddings: Object.assign({}, this.state.embeddings, {\n            [embedding_string]: object,\n          }),\n        })\n      })\n\n    // let array_size = 60000\n    // let fake_object = {}\n    // fake_object.ranges = {\n    //   init_embeddings: [0, 10000],\n    //   selected_embeddings: [10000, 11000],\n    //   unselected_embeddings: [11000, 60000],\n    // }\n    // let fake = [...Array(array_size)].map(n => [\n    //   Math.random() * 40 - 20,\n    //   Math.random() * 40 - 20,\n    // ])\n    // let embeddings = fake\n    // let xs = embeddings.map(e => Math.abs(e[0]))\n    // let ys = embeddings.map(e => Math.abs(e[1]))\n    // let max_x = _.max(xs)\n    // let max_y = _.max(ys)\n    // let max = Math.max(max_x, max_y)\n    // let scale = d3\n    //   .scaleLinear()\n    //   .domain([-max, max])\n    //   .range([-20, 20])\n    // let scaled = embeddings.map(e => [scale(e[0]), scale(e[1])])\n    // fake_object.coordinates = scaled\n\n    // let labelled = [...Array(10000)].map(n => 1)\n    // let selected = [...Array(1000)].map(n => 2)\n    // let unlabelled = [\n    //   ...Array(array_size - labelled.length - selected.length),\n    // ].map(n => 0)\n\n    // let statuses = _.shuffle([...labelled, ...selected, ...unlabelled])\n    // fake_object.statuses = statuses\n\n    // let embedding_string = es(dataset, strategy, round)\n\n    // this.setState({\n    //   loaded_embedding: embedding_string,\n    //   embeddings: Object.assign({}, this.state.embeddings, {\n    //     [embedding_string]: fake_object,\n    //   }),\n    // })\n  }\n\n  componentDidMount() {\n    let { dataset, strategy, round } = this.state\n    this.checkOrFetchData(dataset, strategy, round)\n  }\n\n  render() {\n    return (\n      <Layout\n        {...this.state}\n        datasets={datasets}\n        strategies={strategies}\n        selectDataset={this.selectDataset.bind(this)}\n        selectStrategy={this.selectStrategy.bind(this)}\n        selectRound={this.selectRound.bind(this)}\n      />\n    )\n  }\n}\n\nexport default Data\n","import React, { Component } from 'react'\nimport Data from './Data'\nimport './App.css'\n\nclass App extends Component {\n  render() {\n    return <Data />\n  }\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}