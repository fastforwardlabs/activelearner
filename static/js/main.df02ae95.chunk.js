(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,n){e.exports=n(30)},25:function(e,t,n){},28:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(18),o=n.n(r),s=(n(25),n(3)),l=n(4),c=n(7),d=n(5),u=n(6),h=n(19),p=n(1),g=n(8),m=n(11),b=function(e){return"string"!==typeof e?"":e.charAt(0).toUpperCase()+e.slice(1)},f=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={},n.setHeight=n.setHeight.bind(Object(p.a)(Object(p.a)(n))),n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"setHeight",value:function(){var e=this.divElement.clientHeight;this.props.setHeaderHeight(e)}},{key:"componentDidMount",value:function(){this.setHeight()}},{key:"render",value:function(){var e=this,t=this.props,n=t.datasets,a=t.selectDataset,r=t.strategies,o=t.strategy,s=(t.strategy_colors,t.selectStrategy),l=t.dataset,c=(t.activeStyle,t.grem);return i.a.createElement("div",{ref:function(t){e.divElement=t},style:{position:"absolute",left:0,top:0,display:"flex",flexWrap:"wrap"}},i.a.createElement("div",{style:{background:"transparent",display:"flex",flexWrap:"wrap",padding:"0 ".concat(c/4,"px"),pointerEvents:"all"}},i.a.createElement("div",{style:{padding:"0 ".concat(c/4,"px"),fontWeight:"bold"}},"Active Learner")),i.a.createElement("div",{style:{background:"transparent",display:"flex",flexWrap:"wrap",padding:"0 ".concat(c/4,"px"),pointerEvents:"all"}},i.a.createElement("div",{style:{padding:"0 ".concat(c/4,"px")}},"Dataset:"),n.map(function(e,t){var n,r=e===l;return n=r?i.a.createElement("span",null,e):i.a.createElement("button",{onClick:function(){a(t)}},e),i.a.createElement("span",{key:e,style:{padding:"0 ".concat(c/4,"px"),background:r?"white":"transparent",color:r?"black":"white"}},n)}).reduce(function(e,t){return[e," ",t]})),i.a.createElement("div",{style:{background:"transparent",display:"flex",flexWrap:"wrap",padding:"0 ".concat(c/4,"px"),pointerEvents:"all"}},i.a.createElement("div",{style:{padding:"0 ".concat(c/4,"px")}},"Strategy:"),r.map(function(e,t){var n,a=e===o;return n=a?i.a.createElement("span",null,b(e)):i.a.createElement("button",{onClick:function(){s(t)}},b(e)),i.a.createElement("span",{key:e,style:{padding:"0 ".concat(c/4,"px"),background:a?"white":"transparent",color:a?"black":"white"}},n)}).reduce(function(e,t){return[e," ",t]})))}}]),t}(a.Component);function v(e){return Math.round(1e4*e)/100+"%"}function y(e,t,n,a){a?e.moveTo(t,n):e.lineTo(t,n)}function _(e){return{background:e,boxShadow:"-0.25em 0 0 ".concat(e,", 0.25em 0 0 ").concat(e),textDecoration:"none"}}function w(e){var t=e.split("-");return{dataset:t[0],strategy:t[1],round:t[2]}}var x={random:{accuracy:[.9571,.9603,.9587,.9622,.9647,.969,.9648,.97,.9696],num_labeled:[1e4,11e3,12e3,13e3,14e3,15e3,16e3,17e3,18e3]},entropy:{accuracy:[.9571,.9627,.9689,.9705,.9761,.9777,.9792,.9833,.9817],num_labeled:[1e4,11e3,12e3,13e3,14e3,15e3,16e3,17e3,18e3]},adversarial:{accuracy:[.9529,.9673,.9676,.9755,.9784,.9786,.9784,.981,.9795],num_labeled:[1e4,11e3,12e3,13e3,14e3,15e3,16e3,17e3,18e3]},ensemble:{accuracy:[.9601,.973,.9758,.9784,.9813,.9823,.9836,.985,.9844],num_labeled:[1e4,11e3,12e3,13e3,14e3,15e3,16e3,17e3,18e3]}},O=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.getCtx(this.refs.canvas)}},{key:"render",value:function(){this.props.grem;return i.a.createElement("div",{style:{lineHeight:0,width:this.props.width}},i.a.createElement("canvas",{ref:"canvas",width:2*this.props.width,height:2*this.props.height,style:{width:this.props.width,height:this.props.height,pointerEvents:"auto"}}))}}]),t}(a.Component),j=n(10),k=(Object(g.a)(Array(4)).map(function(e){return Object(g.a)(Array(5)).map(function(e){return Math.random()})}),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).ctx=null,n.getCtx=n.getCtx.bind(Object(p.a)(Object(p.a)(n))),n.draw=n.draw.bind(Object(p.a)(Object(p.a)(n))),n.handleRound=n.handleRound.bind(Object(p.a)(Object(p.a)(n))),n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"getCtx",value:function(e){this.ctx=e.getContext("2d")}},{key:"componentDidMount",value:function(){this.ctx.scale(2,2),this.draw()}},{key:"componentDidUpdate",value:function(e){this.props.strategy_explored!==e.strategy_explored&&this.ctx.scale(2,2),this.draw()}},{key:"handleRound",value:function(e){e!==this.props.round&&this.props.selectRound(e)}},{key:"draw",value:function(){var e=this.props,t=(e.width,e.height),n=e.strategies,a=(e.strategy_colors,e.round),i=e.strategy,r=e.grem,o=e.transition_status,s=e.strategy_explored,l=x[i];t-=2*r,3===o&&(a+=1);var c=this.ctx,d=4,u=n.map(function(e){return j.min(x[e].accuracy)}),h=Math.floor(10*j.min(u))/10,p=1-h;c.clearRect(0,0,100*(s+1),t);var g=2*d;t-=2*g,c.fillStyle="rgba(100,100,100,0.3)",c.fillRect(100*a,g,100,t),c.lineWidth=3,c.strokeStyle="rgba(100,100,100,0.5)";for(var m=0;m<p+.05;m+=.05){c.beginPath();var b=m/p*t;y(c,0,b+g,!0),y(c,100*(s+1),b+g,!1),c.stroke()}var f=n.filter(function(e){return e!==i}),v=!0,_=!1,w=void 0;try{for(var O,k=f[Symbol.iterator]();!(v=(O=k.next()).done);v=!0){var E=O.value,S=x[E];c.lineWidth=2,c.strokeStyle="#666",c.fillStyle="#666",c.beginPath();for(var C=0;C<s+1;C++){y(c,100*C+50,t-(S.accuracy[C]-h)/(1-h)*t+g,0===C)}c.stroke();for(var M=0;M<s+1;M++){var A=(S.accuracy[M]-h)/(1-h);c.beginPath(),c.arc(100*M+50,t-A*t+g,d,0,2*Math.PI),c.fill()}}}catch(P){_=!0,w=P}finally{try{v||null==k.return||k.return()}finally{if(_)throw w}}d=6,c.lineWidth=2,c.strokeStyle="#efefef",c.fillStyle="#efefef",c.beginPath();for(var D=0;D<s+1;D++){y(c,100*D+50,t-(l.accuracy[D]-h)/(1-h)*t+g,0===D)}c.stroke();for(var T=0;T<s+1;T++){var F=(l.accuracy[T]-h)/(1-h);c.beginPath(),c.arc(100*T+50,t-F*t+g,d,0,2*Math.PI),c.fill()}}},{key:"render",value:function(){var e=this,t=this.props,n=(t.width,t.height),a=t.grem,r=(t.strategies,t.strategy),o=t.round,s=t.transition_status,l=(t.adjusted_round,t.strategy_explored),c=t.round_limit,d=x[r],u=o;return s>1&&(u=o+1),i.a.createElement("div",{style:{}},i.a.createElement("div",{style:{display:"inline-flex",pointerEvents:"auto"}},i.a.createElement("div",{style:{padding:"0 ".concat(a/4,"px")}},i.a.createElement("div",{style:{padding:"0 ".concat(a/4,"px")}},i.a.createElement("span",null,"Round ",o+1," of ",c+1)," ")),i.a.createElement("div",{style:{padding:"0 ".concat(a/4,"px")}},i.a.createElement("div",{style:{padding:"0 ".concat(a/4,"px")}},"Accuracy: ",v(d.accuracy[o])))),i.a.createElement("div",{style:{position:"relative",width:100*(l+1),height:n-2*a,pointerEvents:"auto"}},i.a.createElement(O,{width:100*(l+1),height:n-2*a,getCtx:this.getCtx,grem:a}),i.a.createElement(i.a.Fragment,null,Object(g.a)(Array(l+1)).map(function(t,r){return i.a.createElement("div",{key:"explored"+r,onClick:function(){e.handleRound(r)},style:{position:"absolute",top:0,left:100*r,width:100,height:n-2*a,cursor:r===o?"default":"pointer"}})}),i.a.createElement("div",{style:{position:"absolute",top:8,left:100*(l+1),width:100*(c-l),height:n-2*a-16,border:"solid 2px rgba(100,100,100,0.2)",borderLeft:"none",pointerEvents:"none"}}))),i.a.createElement("div",{style:{display:"flex",pointerEvents:"auto",justifyContent:"space-between",padding:"0 ".concat(a/4,"px")}},i.a.createElement("div",{style:{padding:"0 ".concat(a/4,"px")}},"100,000 points, ",function(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}(d.num_labeled[u])," labelled (",v(d.num_labeled[u]/1e6),")")))}}]),t}(a.Component)),E=(Math.floor(10*Math.random()),function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={},n.setHeight=n.setHeight.bind(Object(p.a)(Object(p.a)(n))),n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"setHeight",value:function(){var e=this.divElement.clientHeight;this.props.setFooterHeight(e)}},{key:"componentDidMount",value:function(){this.setHeight()}},{key:"render",value:function(){var e=this,t=this.props,n=t.round,a=t.ww,r=t.grem,o=t.strategies,s=t.strategy_colors,l=t.strategy,c=(t.selectRound,t.color_array_hexes,t.transition_status),d=(t.simulating_labeling,t.gradient_string,t.strategy_explored),u=t.round_limit,h=n,p=d;return c>1&&c<2.3&&(h=Math.max(0,h-1),p=Math.max(0,p-1)),i.a.createElement("div",{ref:function(t){e.divElement=t},style:{position:"absolute",bottom:0,left:0,height:7*r,pointerEvents:"none"}},i.a.createElement(k,{width:a,transition_status:c,height:7*r,grem:r,strategies:o,selectRound:this.props.selectRound,strategy_colors:s,strategy:l,round:h,strategy_explored:p,round_limit:u}))}}]),t}(a.Component)),S=n(14),C=n(2),M=n(12),A=n(9);var D=Object(g.a)(Array(12)).map(function(e,t){return"".concat("","/").concat("mnist_").concat(t,".png")});(new C.i).load("".concat("","/circle.png")).flipY=!1;for(var T=[],F=0;F<12;F++){var P=5329*F,H=5329*(F+1);11===F&&(H=63948),T.push([P,H])}var z=10,R=Object(g.a)(Array(z)).map(function(e,t){return m.hsl(0+360/z*t,1,.5).luminance(.5).gl()});R.push(m.hsl(0,0,.5).luminance(.1).gl()),z=10;var U=Object(g.a)(Array(z)).map(function(e,t){return m.hsl(0+360/z*t,1,.5).luminance(.5).hex()}),L=R.map(function(e){return e.slice(0,3)});function W(e,t){return{coordinates:e.coordinates.slice(t[0],t[1]),labels:e.labels.slice(t[0],t[1]),statuses:e.statuses.slice(t[0],t[1])}}function q(e){for(var t=[],n=0;n<e.length;n++){var a=e[n];t.push(a[0],a[1],0)}return new Float32Array(t)}for(var G=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={},n.init=n.init.bind(Object(p.a)(Object(p.a)(n))),n.animate=n.animate.bind(Object(p.a)(Object(p.a)(n))),n.addPoints=n.addPoints.bind(Object(p.a)(Object(p.a)(n))),n.transitionPoints=n.transitionPoints.bind(Object(p.a)(Object(p.a)(n))),n.addSelectedPoints=n.addSelectedPoints.bind(Object(p.a)(Object(p.a)(n))),n.labelSelected=n.labelSelected.bind(Object(p.a)(Object(p.a)(n))),n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"getZFromScale",value:function(e){var t=C.d.degToRad(this.camera.fov);return this.props.height/e/(2*Math.tan(t/2))}},{key:"getScaleFromZ",value:function(e){var t=C.d.degToRad(this.camera.fov),n=2*(Math.tan(t/2)*e);return this.props.height/n}},{key:"zoomHandler",value:function(){var e=M.a.transform,t=e.k,n=-(e.x-this.props.width/2)/t,a=(e.y-this.props.height/2)/t,i=this.getZFromScale(t);this.camera.position.set(n,a,i)}},{key:"addPoints",value:function(){var e=this.props,t=e.loaded_embedding,n=e.embeddings;this.scene.children[0]=new C.c;for(var a=n[t],i=T.map(function(e){return W(a,e)}),r=new C.c,o=i.length,s=0;s<o;s++){for(var l=i[s],c=l.coordinates.length,d=new C.b,u=q(l.coordinates),h=new Float32Array(2*c),p=0,g=0,m=c;p<m;p++,g+=2){var b=p%73*28/2048,f=28*Math.floor(p/73)/2048;h[g]=b,h[g+1]=f}var v=l.labels.map(function(e){return L[e]}),y=j.flatten(v),_=new Float32Array(y),w=this.textures[s],x=[1/73,1/73];d.addAttribute("position",new C.a(u,3)),d.addAttribute("offset",new C.a(h,2)),d.addAttribute("color",new C.a(_,3));var O={texture:{value:w},repeat:{value:Object(S.a)(C.j,x)},size:{value:20}},k=new C.h({uniforms:O,vertexShader:"\n        attribute vec2 offset;\n        varying vec2 vOffset;\n        attribute vec3 color;\n        varying vec3 vColor;\n        uniform float size;\n        void main() {\n          vOffset = offset;\n          vColor = color;\n          gl_PointSize = size;\n          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n        }",fragmentShader:"\n        uniform sampler2D texture;\n        uniform vec2 repeat;\n        varying vec2 vOffset;\n        varying vec3 vColor;\n        void main() {\n          vec2 uv = vec2( gl_PointCoord.x, gl_PointCoord.y );\n          // vec4 tex = texture2D( texture, uv * repeat );\n          vec4 tex = texture2D( texture, uv * repeat  + vOffset);\n          if ( tex.r < 0.5 ) discard;\n          tex.r = 1.0;\n          tex.g = 1.0;\n          tex.b = 1.0;\n          gl_FragColor = tex * vec4(vColor, 1.0);\n        }"}),E=new C.f(d,k);r.add(E)}this.scene.children[0]=r}},{key:"transitionPoints",value:function(e,t,n){for(var a=this,i=this.scene.children[0],r=this.scene.children[1].children,o=t[e],s=T.map(function(e){return W(o,e)}),l=s.length,c=function(e){var t=i.children[e],o=s[e],l=t.geometry.attributes.position.array.slice(),c=q(o.coordinates),d=t.geometry.attributes.color.array.slice(),u=o.labels.map(function(e){return L[e]}),h=j.flatten(u),p=new Float32Array(h),g=new A.Tween(d).to(p,400).easing(A.Easing.Linear.None);g.onUpdate(function(){t.geometry.attributes.color.array=d,t.geometry.attributes.color.needsUpdate=!0}),g.delay(400);var m=new A.Tween(l).to(c,800).easing(A.Easing.Linear.None);m.onUpdate(function(){t.geometry.attributes.position.array=l,t.geometry.attributes.position.needsUpdate=!0}),m.start().chain(g);var b=r[e],f=Array.from(b.geometry.attributes.indexes.array),v=b.geometry.attributes.position.array.slice(),y=q(f.map(function(e){return o.coordinates[e]})),_=new Float32Array(y),w=1200;n||(w=400);var x={value:20},O=a,k=new A.Tween(x).to({value:0},400).easing(A.Easing.Linear.None).delay(w).onComplete(function(){0===e&&(O.addSelectedPoints(),O.props.setTransitionStatus(.5))});k.onUpdate(function(){b.material.uniforms.size=x});var E=new A.Tween(v).to(_,800).easing(A.Easing.Linear.None);E.onUpdate(function(){b.geometry.attributes.position.array=v,b.geometry.attributes.position.needsUpdate=!0}),E.onComplete(function(){0===e&&setTimeout(function(){b.material.uniforms.size.value>0?O.props.setTransitionStatus(2.6):(O.addSelectedPoints(),O.props.setTransitionStatus(0))},0)}),b.material.uniforms.size.value>0&&E.chain(k),E.start()},d=0;d<l;d++)c(d)}},{key:"addSelectedPoints",value:function(){var e=this,t=this.props,n=t.loaded_embedding,a=t.embeddings;this.scene.children[1]=new C.c;for(var i=a[n],r=T.map(function(e){return W(i,e)}),o=new C.c,s=r.length,l=function(t){for(var n=r[t],a=[],i=0;i<n.statuses.length;i++)1===n.statuses[i]&&a.push(i);for(var s=new Float32Array(a),l=a.length,c=new C.b,d=q(a.map(function(e){return n.coordinates[e]})),u=new Float32Array(2*l),h=0,p=0,g=l;h<g;h++,p+=2){var m=a[h],b=m%73*28/2048,f=28*Math.floor(m/73)/2048;u[p]=b,u[p+1]=f}var v=a.map(function(e){return[1,1,1]}),y=j.flatten(v),_=new Float32Array(y),w=e.textures[t],x=[1/73,1/73];c.addAttribute("position",new C.a(d,3)),c.addAttribute("offset",new C.a(u,2)),c.addAttribute("color",new C.a(_,3)),c.addAttribute("indexes",new C.a(s,1));var O={texture:{value:w},repeat:{value:Object(S.a)(C.j,x)},size:{value:0}},k=new C.h({uniforms:O,vertexShader:"\n        attribute vec2 offset;\n        varying vec2 vOffset;\n        attribute vec3 color;\n        varying vec3 vColor;\n        uniform float size;\n        void main() {\n          vOffset = offset;\n          vColor = color;\n          gl_PointSize = size;\n          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n        }",fragmentShader:"\n        uniform sampler2D texture;\n        uniform vec2 repeat;\n        varying vec2 vOffset;\n        varying vec3 vColor;\n        void main() {\n          vec2 uv = vec2( gl_PointCoord.x, gl_PointCoord.y );\n          // vec4 tex = texture2D( texture, uv * repeat );\n          vec4 tex = texture2D( texture, uv * repeat + vOffset );\n          if ( tex.r < 0.5 ) discard;\n          tex.r = 1.0;\n          tex.g = 1.0;\n          tex.b = 1.0;\n          gl_FragColor = tex * vec4(vColor, 1.0);\n        }"}),E=new C.f(c,k);o.add(E)},c=0;c<s;c++)l(c);this.scene.children[1]=o}},{key:"revealSelected",value:function(){for(var e=this,t={value:0},n={value:20},a=this.scene.children[1].children,i=function(i){var r=a[i],o=new A.Tween(t).to(n,400).easing(A.Easing.Linear.None);o.onUpdate(function(){r.material.uniforms.size=t});var s=e;o.onComplete(function(){0===i&&s.props.setTransitionStatus(1)}),o.start()},r=0;r<a.length;r++)i(r)}},{key:"labelSelected",value:function(){for(var e=this,t=this.props,n=t.loaded_embedding,a=t.embeddings[n],i=T.map(function(e){return W(a,e)}),r=this.scene.children[1].children,o=function(t){var n=i[t],a=r[t],o=Array.from(a.geometry.attributes.indexes.array),s=r[t].geometry.attributes.color.array.slice(),l=o.map(function(e){var t=n.labels[e];return L[t]}),c=j.flatten(l),d=new Float32Array(c),u=new A.Tween(s).to(d,400).easing(A.Easing.Linear.None),h=r[t];u.onUpdate(function(){h.geometry.attributes.color.array=s,h.geometry.attributes.color.needsUpdate=!0});var p=e;u.onComplete(function(){0===t&&setTimeout(function(){p.props.setTransitionStatus(2.3)},0)}),u.start()},s=0;s<i.length;s++)o(s)}},{key:"componentDidUpdate",value:function(e){var t=this;if(null===e.loaded_embedding&&null!==this.props.loaded_embedding)Promise.all(function(e){var t=new C.i;return e.map(function(e){return new Promise(function(n,a){t.load(e,function(e){e.flipY=!1,n(e)},void 0,function(e){return a(e)})})})}(D)).then(function(e){t.textures=e,t.addPoints(),t.addSelectedPoints(),t.props.setTransitionStatus(.5)});else if(e.loaded_embedding!==this.props.loaded_embedding){var n=w(e.loaded_embedding),a=w(this.props.loaded_embedding);n.dataset!==a.dataset?console.log("different dataset"):n.strategy!==a.strategy?this.transitionPoints(this.props.loaded_embedding,this.props.embeddings,!0):n.round!==a.round&&1.5!==this.props.transition_status&&this.transitionPoints(this.props.loaded_embedding,this.props.embeddings,!0)}else.5===this.props.transition_status&&0===e.transition_status||.5===this.props.transition_status&&2.6===e.transition_status?this.revealSelected():2===this.props.transition_status&&1.5===e.transition_status?this.labelSelected(this.props.loaded_embedding,this.props.embeddings):2.3===this.props.transition_status&&2===e.transition_status?this.transitionPoints(this.props.loaded_embedding,this.props.embeddings):(this.props.round,e.round)}},{key:"init",value:function(){var e=this.props,t=e.width,n=e.height;this.scene=new C.g;var a=t/n;this.camera=new C.e(75,a,.01,1e3),this.camera.position.z=30,this.renderer=new C.k,this.renderer.setClearColor(1118481,1),this.renderer.setSize(t,n),this.mount.appendChild(this.renderer.domElement);var i=new C.c;this.scene.add(i);var r=new C.c;this.scene.add(r),this.d3_zoom=M.d().scaleExtent([this.getScaleFromZ(999),this.getScaleFromZ(.1)]).on("zoom",this.zoomHandler.bind(this));var o=M.c(this.mount);this.view=o,o.call(this.d3_zoom);var s=this.getScaleFromZ(this.camera.position.z),l=M.e.translate(t/2,n/2).scale(s);this.d3_zoom.transform(o,l),this.animate()}},{key:"animate",value:function(){requestAnimationFrame(this.animate),A.update(),this.renderer.sortObjects=!1,this.renderer.render(this.scene,this.camera)}},{key:"componentDidMount",value:function(){this.init()}},{key:"componentWillUnmount",value:function(){this.mount.removeChild(this.renderer.domElement)}},{key:"render",value:function(){var e=this,t=this.props,n=t.width,a=t.height,r=t.grem;return i.a.createElement("div",{style:{position:"absolute",left:0,width:n,height:a,background:"#222",overflow:"hidden"},grem:r},i.a.createElement("div",{style:{position:"absolute",left:0,top:0,width:n,height:a},ref:function(t){e.mount=t}}),i.a.createElement("div",{style:{background:"transparent",display:"flex",flexWrap:"auto",padding:"0 ".concat(r/4,"px"),position:"absolute",left:0,bottom:this.props.footer_height+r,pointerEvents:"none"}},i.a.createElement("div",{style:{display:"flex",flexWrap:"auto"}},i.a.createElement("div",{style:{padding:"0 ".concat(r/4,"px")}},"Key:"),i.a.createElement("div",{style:{background:"#888",color:"#111",height:r,padding:"0 ".concat(r/2,"px"),textAlign:"center"}},"unlabeled"),i.a.createElement("div",{style:{background:"#fff",color:"#111",height:r,padding:"0 ".concat(r/2,"px"),textAlign:"center"}},"selected")),i.a.createElement("div",{style:{padding:"0 ".concat(r/4,"px 0 ").concat(.75*r,"px"),display:"flex",flexWrap:"auto"}},i.a.createElement("div",{style:{padding:"0 ".concat(r/4,"px")}},"Labels:"),U.map(function(e,t){return i.a.createElement("div",{key:"color_"+t,style:{background:U[t],height:r,textAlign:"center",color:"#111",width:r}},t)}))))}}]),t}(a.Component),I=(Object(g.a)(Array(40)).map(function(e){return null}),Object(g.a)(Array(12)).map(function(e,t){return"".concat("","/").concat("mnist_").concat(t,".png")})),N=Object(g.a)(Array(10)).map(function(e,t){return m.hsl(0+36*t,1,.5).luminance(.5).hex()}),Z=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={labels:null,prev_loaded:null},n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this,n=this.props.embeddings;if(this.props.loaded_embedding!==e.loaded_embedding)if(null===e.loaded_embedding)this.setState({prev_loaded:this.props.loaded_embedding});else{for(var a=n[e.loaded_embedding],i=[],r=0;r<a.statuses.length;r++)1===a.statuses[r]&&i.push(r);var o=n[this.props.loaded_embedding],s=i.map(function(e,t){return o.labels[e]});this.setState({labels:s})}if(.5===this.props.transition_status&&0!==e.transition_status){var l=this;setTimeout(function(){l.setState({prev_loaded:t.props.loaded_embedding,labels:null})},0)}}},{key:"render",value:function(){var e=this,t=this.props,n=t.width,a=t.height,r=t.grem,o=t.embeddings,s=t.loaded_embedding,l=t.transition_status,c=t.header_height,d=t.round,u=t.round_limit,h=[],p=o[this.state.prev_loaded];if(p)for(var g=0;g<p.statuses.length;g++)1===p.statuses[g]&&h.push(g);var m=r/4,b=r/4,f=(n-2*b*2-3*m)/4,v=f,y=h.map(function(e){var t=e%5329;return[Math.floor(e/5329),t%73,Math.floor(t/73)]});null!==s&&h.map(function(e,t){return o[s].labels[t]});var _=f/28,w=d;return l>1&&l<2.3&&(w=Math.max(0,w-1)),i.a.createElement("div",{style:{position:"absolute",right:0,top:c,width:n,height:a,background:"#333",overflow:"hidden"}},0===l?i.a.createElement("div",{style:{padding:r/4}},i.a.createElement("div",{style:{padding:r/4}},"Use the select data button below to select data points based on the strategy.")):null,i.a.createElement("div",{style:{opacity:0===l||2.6===l||u===w?0:1,transition:"opacity 0.4s linear",transitionDelay:"0.1s",padding:r/2,position:"relative"}},i.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",position:"absolute",left:0,top:0,width:n,background:"#444",padding:"".concat(r/4,"px ").concat(r/2,"px")}},i.a.createElement("div",null,l<2?"Selected":"Labeled",":"),i.a.createElement("div",null,"1,000")),i.a.createElement("div",{style:{right:0,top:c,width:n,height:a-r/2,paddingTop:1*r,background:"#333",overflow:"auto"}},i.a.createElement("div",{style:{display:"grid",paddingTop:2*b,paddingBottom:2*b,gridTemplateColumns:"repeat(".concat(4,", ").concat(f,"px)"),gridColumnGap:m,gridRowGap:2*m}},y.length>0?y.map(function(t,n){var a=null!==e.state.labels&&e.props.transition_status>1.5?e.state.labels[n]:"?",o=null!==e.state.labels&&e.props.transition_status>1.5?N[e.state.labels[n]]:"#fff";return i.a.createElement("div",{key:t,style:{width:f,height:v+r,background:o,color:"#111",textAlign:"center",transition:"background 400ms linear"}},i.a.createElement("div",{style:{backgroundImage:"url(".concat(I[t[0]],")"),backgroundSize:"".concat(2048*_,"px ").concat(2048*_,"px"),backgroundPosition:"-".concat(t[1]*_*28,"px -").concat(t[2]*_*28,"px"),width:f,height:v,imageRendering:"pixelated"}}),i.a.createElement("div",null,a))}):null))))}}]),t}(a.Component),B=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.width,n=e.height,a=e.grem,r=e.strategies,o=e.strategy_colors,s=e.strategy,l=e.active_embedding,c=e.requested_embedding,d=e.loaded_embedding,u=e.embeddings,h=e.mnist_images,p=e.ranges,g=e.transition_status,m=e.setTransitionStatus,b=e.loading_round,f=e.header_height,v=e.footer_height,y=e.round,_=e.round_limit;return i.a.createElement("div",{style:{position:"relative"}},i.a.createElement(G,{width:t,height:n,grem:a,active_embedding:l,strategies:r,strategy_colors:o,strategy:s,embeddings:u,requested_embedding:c,loaded_embedding:d,transition_status:g,setTransitionStatus:m,loading_round:b,footer_height:v,round:y}),i.a.createElement(Z,{width:200,height:n-this.props.footer_height-2*a-f,grem:a,mnist_images:h,embeddings:u,loaded_embedding:d,ranges:p,transition_status:g,header_height:f,round:y,round_limit:_}))}}]),t}(a.Component),J=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e,t,n=this,a=this.props,r=a.transition_status,o=a.grem,s=a.round_limit,l=a.round;0===r?(e="Loading...",t=null):.5===r?(e="Selecting...",t=null):1===r?(e="Label & train",t=1.5):1.5===r?(e="Labeling...",t=null):2===r?(e="Training...",t=null):2.3===r?(e="Training...",t=null):2.6===r&&(e="Deselecting...",t=null);var c=l;return r>1&&r<2.3&&(c=Math.max(0,c-1)),i.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",background:"#111",position:"absolute",bottom:this.props.footer_height,right:0}},i.a.createElement("div",null,s!==c?i.a.createElement("button",{style:{width:200,height:2*o,background:null===t?"#eee":"white",color:"black",textAlign:"left",paddingLeft:o/2,cursor:null===t?"default":"pointer",textDecoration:null===t?"none":"underline"},disabled:null===t,onClick:function(){null!==t&&n.props.setTransitionStatus(t)}},e):null))}}]),t}(a.Component),V=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={count:0},n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=0,t=0,n=this;function a(){e+=25;var i=Math.floor(e);i!==t&&(t=i),n.setState({count:t}),t<1e3?requestAnimationFrame(a):setTimeout(function(){n.props.labelsGotten()},200)}setTimeout(function(){return requestAnimationFrame(a)},200)}},{key:"render",value:function(){var e=this.props,t=e.grem,n=e.ww;return i.a.createElement("div",null,i.a.createElement("div",{style:{height:t,width:"".concat(100,"%"),marginTop:t/2,background:"#222"}},i.a.createElement("div",{style:{height:t,width:"".concat(this.state.count/1e3*100,"%"),overflow:"hidden"}},i.a.createElement("div",{style:{height:t,width:Math.min(500,n)-2*t,background:"linear-gradient(to right, ".concat(this.props.gradient_string,")")}}))))}}]),t}(a.Component),Y=4,K=Object(g.a)(Array(Y)).map(function(e,t){return m.hsl(90/Y*t-45,1,.5).luminance(.5).hex()}),Q=[],$=0;$<12;$++){var X=5329*$,ee=5329*($+1);11===$&&(ee=63948),Q.push([X,ee])}var te=Object(g.a)(Array(12)).map(function(e,t){return"".concat("","/").concat("mnist_").concat(t,".png")}).map(function(e){var t=document.createElement("img");return t.src=e,t});Y=10;var ne=Object(g.a)(Array(Y)).map(function(e,t){return m.hsl(0+360/Y*t,1,.5).luminance(.5).hex()}),ae=ne.reduce(function(e,t,n){return e+t+" "+Math.round(n/Y*100)+(n===Y-1?"%":"%, ")},""),ie=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={ww:null,wh:null,header_height:null,footer_height:null,transition_status:0,loading_round:!1,simulating_labeling:!1},n.setSize=n.setSize.bind(Object(p.a)(Object(p.a)(n))),n.setHeaderHeight=n.setHeaderHeight.bind(Object(p.a)(Object(p.a)(n))),n.setFooterHeight=n.setFooterHeight.bind(Object(p.a)(Object(p.a)(n))),n.setTransitionStatus=n.setTransitionStatus.bind(Object(p.a)(Object(p.a)(n))),n.labelsGotten=n.labelsGotten.bind(Object(p.a)(Object(p.a)(n))),n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"setHeaderHeight",value:function(e){this.setState({header_height:e})}},{key:"setFooterHeight",value:function(e){this.setState({footer_height:e})}},{key:"setSize",value:function(){this.setState({ww:window.innerWidth,wh:window.innerHeight})}},{key:"componentWillMount",value:function(){this.setSize()}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.setSize)}},{key:"componentDidUpdate",value:function(e,t){!0===this.state.loading_round&&e.loaded_embedding!==this.props.loaded_embedding&&this.setState({loading_round:!1})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.setSize)}},{key:"setTransitionStatus",value:function(e){1.5===e?(this.setState({transition_status:e,simulating_labeling:!0}),this.props.selectRound(this.props.round+1)):this.setState({transition_status:e})}},{key:"labelsGotten",value:function(){this.setState({transition_status:2,loading_round:!0,simulating_labeling:!1})}},{key:"render",value:function(){var e=this.state,t=e.ww,n=e.wh,a=e.header_height,r=e.footer_height,o=e.loading_round,s=e.simulating_labeling,l=e.transition_status,c=this.props,d=c.dataset,u=c.strategy,h=c.round,p=c.datasets,g=c.strategies,m=c.selectDataset,b=c.selectStrategy,v=c.embeddings,y=c.requested_embedding,w=c.loaded_embedding,x=c.strategy_explored;return null===t?i.a.createElement("div",{style:{padding:5.25}},"Loading layout..."):i.a.createElement("div",{style:{width:t,height:n,overflow:"hidden",position:"relative"}},i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{style:{position:"fixed",top:0,right:0,padding:10.5,zIndex:999,background:"red",display:"none"}},l),null!==r&&null!==a?i.a.createElement("div",{style:{background:"white",height:n}},i.a.createElement(B,{width:t,height:n,grem:21,strategies:g,strategy_colors:K,strategy:u,embeddings:v,requested_embedding:y,loaded_embedding:w,loading_round:o,mnist_images:te,ranges:Q,transition_status:this.state.transition_status,setTransitionStatus:this.setTransitionStatus,footer_height:r,round:h,header_height:a,round_limit:7})):null,null!==r?i.a.createElement(J,{transition_status:this.state.transition_status,grem:21,footer_height:r,setTransitionStatus:this.setTransitionStatus,round_limit:7,round:h}):null,i.a.createElement(f,{datasets:p,selectDataset:m,strategies:g,strategy:u,strategy_colors:K,selectStrategy:b,dataset:d,activeStyle:_,setHeaderHeight:this.setHeaderHeight,gradient_string:ae,grem:21,transition_status:this.state.transition_status}),null!==a?i.a.createElement(E,{round:h,ww:t,grem:21,strategies:g,strategy_colors:K,strategy:u,setFooterHeight:this.setFooterHeight,selectRound:this.props.selectRound,gradient_string:ae,color_array_hexes:ne,transition_status:this.state.transition_status,setTransitionStatus:this.setTransitionStatus,simulating_labeling:s,strategy_explored:x,round_limit:7}):null,this.state.simulating_labeling?i.a.createElement("div",{style:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",display:"grid",justifyItems:"center",alignItems:"center"}},i.a.createElement("div",{style:{width:Math.min(500,t),background:"#666",padding:21}},i.a.createElement("div",null,"Getting labels for 1,000 selected points..."),i.a.createElement(V,{grem:21,gradient_string:ae,ww:t,labelsGotten:this.labelsGotten}))):null))}}]),t}(a.Component),re=["MNIST","Quickdraw","Caltech"],oe=["random","entropy","adversarial","ensemble"],se=["mnist_random_round","mnist_entropy_round","mnist_adv_round","mnist_ensemble_entropy_round"];function le(e,t,n){return"".concat(e,"-").concat(t,"-").concat(n)}var ce=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={embeddings:{},dataset:re[0],strategy:oe[1],round:0,requested_embedding:null,loaded_embedding:null,strategy_explored:0},n.scaleEmbeddings=n.scaleEmbeddings.bind(Object(p.a)(Object(p.a)(n))),n.fetchData=n.fetchData.bind(Object(p.a)(Object(p.a)(n))),n.checkOrFetchData=n.checkOrFetchData.bind(Object(p.a)(Object(p.a)(n))),n.selectRound=n.selectRound.bind(Object(p.a)(Object(p.a)(n))),n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"selectRound",value:function(e){var t=Math.max(this.state.strategy_explored,e);this.setState({round:e,strategy_explored:t}),this.checkOrFetchData(this.state.dataset,this.state.strategy,e)}},{key:"selectDataset",value:function(e){this.setState({dataset:re[e],strategy_explored:0}),this.checkOrFetchData(re[e],this.state.strategy,this.state.round)}},{key:"selectStrategy",value:function(e){this.setState({strategy:oe[e]}),this.checkOrFetchData(this.state.dataset,oe[e],this.state.round)}},{key:"checkOrFetchData",value:function(e,t,n){var a=this.state.embeddings,i=le(e,t,n);this.setState({requested_embedding:i}),void 0!==a[i]?this.setState({loaded_embedding:i}):this.fetchData(e,t,n)}},{key:"scaleEmbeddings",value:function(e){var t=e.map(function(e){return Math.abs(e[0])}),n=e.map(function(e){return Math.abs(e[1])}),a=j.max(t),i=j.max(n),r=Math.max(a,i),o=M.b().domain([-r,r]).range([-20,20]);return e.map(function(e){return[o(e[0]),o(e[1])]})}},{key:"fetchData",value:function(e,t,n){var a=this,i="".concat("","/").concat(se[oe.indexOf(t)]).concat(n,".json");fetch(i).then(function(e){return e.json()}).then(function(i){var r=i.coordinates,o=r.map(function(e){return Math.abs(e[0])}),s=r.map(function(e){return Math.abs(e[1])}),l=j.max(o),c=j.max(s),d=Math.max(l,c),u=M.b().domain([-d,d]).range([-20,20]),p=r.map(function(e){return[u(e[0]),u(e[1])]}),g={};g.coordinates=p,g.statuses=i.status,g.labels=i.labels;var m=le(e,t,n);a.setState({loaded_embedding:m,embeddings:Object.assign({},a.state.embeddings,Object(h.a)({},m,g))})})}},{key:"componentDidMount",value:function(){var e=this.state,t=e.dataset,n=e.strategy,a=e.round;this.checkOrFetchData(t,n,a)}},{key:"render",value:function(){return i.a.createElement(ie,Object.assign({},this.state,{datasets:re,strategies:oe,selectDataset:this.selectDataset.bind(this),selectStrategy:this.selectStrategy.bind(this),selectRound:this.selectRound.bind(this)}))}}]),t}(a.Component),de=(n(28),function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement(ce,null)}}]),t}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(de,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[20,2,1]]]);
//# sourceMappingURL=main.df02ae95.chunk.js.map