(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(t,e,a){t.exports=a(31)},26:function(t,e,a){},29:function(t,e,a){},31:function(t,e,a){"use strict";a.r(e);var n=a(0),i=a.n(n),r=a(20),o=a.n(r),s=(a(26),a(3)),c=a(4),l=a(7),d=a(5),u=a(6),h=a(1),p=a(11),g=a(8),m=a(12),v=function(t){return"string"!==typeof t?"":t.charAt(0).toUpperCase()+t.slice(1)},f=function(t){function e(t){var a;return Object(s.a)(this,e),(a=Object(l.a)(this,Object(d.a)(e).call(this,t))).state={},a.setHeight=a.setHeight.bind(Object(h.a)(Object(h.a)(a))),a}return Object(u.a)(e,t),Object(c.a)(e,[{key:"setHeight",value:function(){var t=this.divElement.clientHeight;this.props.setHeaderHeight(t)}},{key:"componentDidMount",value:function(){this.setHeight()}},{key:"render",value:function(){var t=this,e=this.props,a=e.datasets,n=e.selectDataset,r=e.strategies,o=e.strategy,s=(e.strategy_colors,e.selectStrategy),c=e.dataset,l=(e.activeStyle,e.grem);return i.a.createElement("div",{ref:function(e){t.divElement=e},style:{position:"absolute",left:0,top:0,display:"flex",flexWrap:"wrap"}},i.a.createElement("div",{style:{background:"transparent",display:"flex",flexWrap:"wrap",padding:"0 ".concat(l/4,"px 0 ").concat(l/2,"px"),pointerEvents:"all"}},i.a.createElement("div",{style:{padding:"0 ".concat(l/4,"px"),fontWeight:"bold"}},"Active Learner")),i.a.createElement("div",{style:{background:"transparent",display:"flex",flexWrap:"wrap",padding:"0 ".concat(l/4,"px"),pointerEvents:"all"}},i.a.createElement("div",{style:{padding:"0 ".concat(l/4,"px")}},"Dataset:"),a.map(function(t,e){var a,r=t===c;return a=r?i.a.createElement("span",null,t):i.a.createElement("button",{onClick:function(){n(e)}},t),i.a.createElement("span",{key:t,style:{padding:"0 ".concat(l/4,"px"),background:r?"white":"transparent",color:r?"black":"white"}},a)}).reduce(function(t,e){return[t," ",e]})),i.a.createElement("div",{style:{background:"transparent",display:"flex",flexWrap:"wrap",padding:"0 ".concat(l/4,"px"),pointerEvents:"all"}},i.a.createElement("div",{style:{padding:"0 ".concat(l/4,"px")}},"Strategy:"),r.map(function(t,e){var a,n=t===o;return a=n?i.a.createElement("span",null,v(t)):i.a.createElement("button",{onClick:function(){s(e)}},v(t)),i.a.createElement("span",{key:t,style:{padding:"0 ".concat(l/4,"px"),background:n?"white":"transparent",color:n?"black":"white"}},a)}).reduce(function(t,e){return[t," ",e]})))}}]),e}(n.Component);function b(t){var e=t.toString().split(".");return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),e.join(".")}function y(t){return Math.round(1e4*t)/100+"%"}function _(t,e,a,n){n?t.moveTo(e,a):t.lineTo(e,a)}function x(t){return{background:t,boxShadow:"-0.25em 0 0 ".concat(t,", 0.25em 0 0 ").concat(t),textDecoration:"none"}}function w(t){var e=t.split("-");return{dataset:e[0],strategy:e[1],round:e[2]}}var O={MNIST:[0,1,2,3,4,5,6,7,8,9],Quickdraw:["dolphin","cat","face","angel","airplane","apple","broccoli","crayon","bicycle","elephant"],Caltech:["cake","dolphin","elephant","golden gate bridge","goldfish","rainbow","teapot","teddy bear","washing machine","waterfall"]},j=function(t){function e(){return Object(s.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(u.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){this.props.getCtx(this.refs.canvas)}},{key:"render",value:function(){this.props.grem;return i.a.createElement("div",{style:{lineHeight:0,width:this.props.width}},i.a.createElement("canvas",{ref:"canvas",width:2*this.props.width,height:2*this.props.height,style:{width:this.props.width,height:this.props.height,pointerEvents:"auto"}}))}}]),e}(n.Component),k=a(9),E={MNIST:{num_labeled:[5e3,6e3,7e3,8e3,9e3,1e4,11e3,12e3,13e3],random:{accuracy:[.923,.9468,.9379,.9551,.9558,.955,.958,.9664,.9635]},entropy:{accuracy:[.923,.9485,.9589,.96,.9744,.9702,.9774,.9764,.9782]},adversarial:{accuracy:[.923,.9534,.9558,.9691,.9743,.9716,.9775,.9801,.9795]},ensemble:{accuracy:[.923,.9554,.967,.9731,.9748,.979,.9812,.9848,.9829]}},Quickdraw:{num_labeled:[5e3,6e3,7e3,8e3,9e3,1e4,11e3,12e3,13e3],random:{accuracy:[.7685568264784619,.8011681674373327,.7949622779265028,.8040885860306644,.8141275249452421,.823192990995376,.8260525675346799,.831284984181066,.8297639328303723]},entropy:{accuracy:[.7685568264784619,.7963008031151132,.7894256510099781,.8050012168410805,.8212460452664881,.8202725724020443,.8123631053784376,.8289729861280117,.8267826721830129]},adversarial:{accuracy:[.7685568264784619,.7963008031151132,.7894256510099781,.8050012168410805,.8212460452664881,.8202725724020443,.8123631053784376,.8289729861280117,.8267826721830129]},ensemble:{accuracy:[.7685568264784619,.8283037235337065,.8426624482842541,.83603066439523,.8523971769286931,.8506935994159163,.8619493794110489,.8623752737892432,.8586639084935508]}},Caltech:{num_labeled:[300,350,400,450,500,550,600,650,700],random:{accuracy:[.7547169811320755,.7971698113207547,.8490566037735849,.8632075471698113,.8490566037735849,.8726415094339622,.8915094339622641,.8584905660377359,.910377358490566]},entropy:{accuracy:[.7547169811320755,.8349056603773585,.8066037735849056,.8490566037735849,.8632075471698113,.8773584905660378,.8773584905660378,.9056603773584906,.8726415094339622]},adversarial:{accuracy:[.7547169811320755,.7971698113207547,.8537735849056604,.8867924528301887,.8679245283018868,.8726415094339622,.8773584905660378,.8584905660377359,.9056603773584906]},ensemble:{accuracy:[.7547169811320755,.9339622641509434,.9339622641509434,.9292452830188679,.9339622641509434,.9481132075471698,.9292452830188679,.9339622641509434,.9245283018867925]}}},S={MNIST:6e4,Quickdraw:65729,Caltech:822},C=(Object(g.a)(Array(4)).map(function(t){return Object(g.a)(Array(5)).map(function(t){return Math.random()})}),function(t){function e(t){var a;return Object(s.a)(this,e),(a=Object(l.a)(this,Object(d.a)(e).call(this,t))).state={show_tip:null},a.ctx=null,a.getCtx=a.getCtx.bind(Object(h.a)(Object(h.a)(a))),a.draw=a.draw.bind(Object(h.a)(Object(h.a)(a))),a.handleRound=a.handleRound.bind(Object(h.a)(Object(h.a)(a))),a}return Object(u.a)(e,t),Object(c.a)(e,[{key:"getCtx",value:function(t){this.ctx=t.getContext("2d")}},{key:"componentDidMount",value:function(){this.ctx.scale(2,2),this.draw()}},{key:"componentDidUpdate",value:function(t){this.props.strategy_explored!==t.strategy_explored&&this.ctx.scale(2,2),this.draw()}},{key:"handleRound",value:function(t){t!==this.props.round&&this.props.selectRound(t)}},{key:"handleEnter",value:function(t){this.setState({show_tip:t})}},{key:"handleLeave",value:function(){this.setState({show_tip:null})}},{key:"draw",value:function(){var t=this.props,e=(t.width,t.height),a=t.strategies,n=(t.strategy_colors,t.round),i=t.strategy,r=t.grem,o=t.transition_status,s=t.strategy_explored,c=t.dataset,l=E[c],d=l[i];e-=2*r,3===o&&(n+=1);var u=this.ctx,h=4,p=a.map(function(t){return k.min(l[t].accuracy)}),g=Math.floor(10*k.min(p))/10,m=1-g;u.clearRect(0,0,100*(s+1),e);var v=2*h;e-=2*v,u.fillStyle="rgba(100,100,100,0.3)",u.fillRect(100*n,v,100,e),u.lineWidth=3,u.strokeStyle="rgba(100,100,100,0.5)";for(var f=0;f<m+.05;f+=.05){u.beginPath();var b=f/m*e;_(u,0,b+v,!0),_(u,100*(s+1),b+v,!1),u.stroke()}var y=a.filter(function(t){return t!==i}),x=!0,w=!1,O=void 0;try{for(var j,S=y[Symbol.iterator]();!(x=(j=S.next()).done);x=!0){var C=j.value,M=l[C];u.lineWidth=2,u.strokeStyle="#666",u.fillStyle="#666",u.beginPath();for(var T=0;T<s+1;T++){_(u,100*T+50,e-(M.accuracy[T]-g)/(1-g)*e+v,0===T)}u.stroke();for(var A=0;A<s+1;A++){var z=(M.accuracy[A]-g)/(1-g);u.beginPath(),u.arc(100*A+50,e-z*e+v,h,0,2*Math.PI),u.fill()}}}catch(R){w=!0,O=R}finally{try{x||null==S.return||S.return()}finally{if(w)throw O}}h=6,u.lineWidth=2,u.strokeStyle="#efefef",u.fillStyle="#efefef",u.beginPath();for(var D=0;D<s+1;D++){_(u,100*D+50,e-(d.accuracy[D]-g)/(1-g)*e+v,0===D)}u.stroke();for(var P=0;P<s+1;P++){var F=(d.accuracy[P]-g)/(1-g);u.beginPath(),u.arc(100*P+50,e-F*e+v,h,0,2*Math.PI),u.fill()}}},{key:"render",value:function(){var t=this,e=this.props,a=(e.width,e.height),n=e.grem,r=e.strategies,o=e.strategy,s=e.round,c=e.transition_status,l=(e.adjusted_round,e.strategy_explored),d=e.round_limit,u=e.dataset,h=this.state.show_tip,m=E[u].num_labeled,v=E[u][o],f=s;c>1&&(f=s+1),f=s;var _=E[u];return i.a.createElement("div",{style:{}},i.a.createElement("div",{style:{display:"inline-flex",pointerEvents:"auto"}},i.a.createElement("div",{style:{padding:"0 ".concat(n/4,"px")}},i.a.createElement("div",{style:{padding:"0 ".concat(n/4,"px")}},i.a.createElement("span",null,"Round ",s+1," of ",d+1)," ")),i.a.createElement("div",{style:{padding:"0 ".concat(n/4,"px")}},i.a.createElement("div",{style:{padding:"0 ".concat(n/4,"px")}},"Accuracy: ",(100*v.accuracy[s]).toFixed(2),"% (",1===Math.sign(v.accuracy[s]-v.accuracy[0])?"+":"",y(v.accuracy[s]-v.accuracy[0]),")")),i.a.createElement("div",{style:{padding:"0 ".concat(n/4,"px"),display:"none"}},i.a.createElement("div",{style:{padding:"0 ".concat(n/4,"px")}},"Relative Error Reduction: ".concat((100*(1-(1-v.accuracy[s])/(1-v.accuracy[0]))).toFixed(2)),"%"))),i.a.createElement("div",{style:{position:"relative",width:100*(l+1),height:a-2*n,pointerEvents:"auto"}},i.a.createElement(j,{width:100*(l+1),height:a-2*n,getCtx:this.getCtx,grem:n}),i.a.createElement(i.a.Fragment,null,Object(g.a)(Array(l+1)).map(function(e,c){var l=r.map(function(t,e){return{string:"".concat(t,": ").concat(y(_[t].accuracy[c])),strategy:t,value:_[t].accuracy[c],diff:_[t].accuracy[c]-_[t].accuracy[0]}});return l=k.sortBy(l,"value").reverse(),i.a.createElement("div",{key:"explored"+c,onMouseEnter:t.handleEnter.bind(t,c),onMouseLeave:t.handleLeave.bind(t),onClick:function(){t.handleRound(c)},style:{position:"absolute",top:0,left:100*c,width:100,height:a-2*n,cursor:c===s?"default":"pointer"}},h===c?i.a.createElement("div",{style:{position:"absolute",left:0,bottom:a-2*n,background:"#333",padding:"".concat(n/2,"px ").concat(n/2,"px"),whiteSpace:"nowrap",pointerEvents:"none",fontSize:n/1.5*1}},i.a.createElement("div",{style:{color:"#fff",marginBottom:n/4}},"Round ",c+1),l.map(function(t){return i.a.createElement("div",{style:{textTransform:"capitalize",color:o===t.strategy?"#fff":"#aaa",display:"flex",marginBottom:n/8}},i.a.createElement("div",{style:{marginRight:n/4}},t.strategy,":"),i.a.createElement("div",{style:{textAlign:"right",flexGrow:1}},(100*t.value).toFixed(2),"% (",1===Math.sign(t.diff)?"+":"",(100*t.diff).toFixed(2),"%)"))})):null)}),i.a.createElement("div",{style:Object(p.a)({position:"absolute",top:8,left:100*(l+1),width:100*(d-l),height:a-2*n-16,border:"solid 2px rgba(100,100,100,0.2)",pointerEvents:"auto",borderLeft:"none"},"pointerEvents","none")}))),i.a.createElement("div",{style:{display:"flex",pointerEvents:"auto",justifyContent:"space-between",padding:"0 ".concat(n/4,"px")}},i.a.createElement("div",{style:{padding:"0 ".concat(n/4,"px")}},b(S[this.props.dataset])," points,"," ",b(m[f])," labelled (",y(m[f]/S[this.props.dataset]),")")))}}]),e}(n.Component)),M=(Math.floor(10*Math.random()),function(t){function e(t){var a;return Object(s.a)(this,e),(a=Object(l.a)(this,Object(d.a)(e).call(this,t))).state={},a.setHeight=a.setHeight.bind(Object(h.a)(Object(h.a)(a))),a}return Object(u.a)(e,t),Object(c.a)(e,[{key:"setHeight",value:function(){var t=this.divElement.clientHeight;this.props.setFooterHeight(t)}},{key:"componentDidMount",value:function(){this.setHeight()}},{key:"render",value:function(){var t=this,e=this.props,a=e.round,n=e.ww,r=e.grem,o=e.strategies,s=e.strategy_colors,c=e.strategy,l=(e.selectRound,e.color_array_hexes,e.transition_status),d=(e.simulating_labeling,e.gradient_string,e.strategy_explored),u=e.round_limit,h=e.dataset,p=a,g=d;return l>1&&l<2.3&&(p=Math.max(0,p-1),g=Math.max(0,g-1)),i.a.createElement("div",{ref:function(e){t.divElement=e},style:{position:"absolute",bottom:2*r,left:0,height:7*r,pointerEvents:"none"}},i.a.createElement(C,{width:n,transition_status:l,height:7*r,grem:r,strategies:o,selectRound:this.props.selectRound,dataset:h,strategy_colors:s,strategy:c,round:p,strategy_explored:g,round_limit:u}))}}]),e}(n.Component)),T=a(15),A=a(16),z=a(2),D=a(13),P=a(10);function F(t){var e=new z.j;return t.map(function(t){return new Promise(function(a,n){e.load(t,function(t){t.flipY=!1,a(t)},void 0,function(t){return n(t)})})})}var R={sprite_side:73,sprite_size:5329,sprite_number:12,sprite_image_size:28},H=Object.assign({},R,{sprite_number:13}),L=Object.assign({},R,{sprite_side:9,sprite_size:81,sprite_number:11,sprite_image_size:224}),I={MNIST:R,Quickdraw:H,Caltech:L},W={MNIST:30,Quickdraw:30,Caltech:30};(new z.j).load("".concat("","/circle.png")).flipY=!1;var N=Object(g.a)(Array(R.sprite_number)).map(function(t,e){return"".concat("","/").concat("mnist_").concat(e,".png")}),U=Object(g.a)(Array(H.sprite_number)).map(function(t,e){return"".concat("","/").concat("QUICKDRAW_").concat(e,".png")}),Q=Object(g.a)(Array(L.sprite_number)).map(function(t,e){return"".concat("","/").concat("CALTECH_").concat(e,".png")}),q={MNIST:N,Quickdraw:U,Caltech:Q},B={MNIST:N.map(function(t){var e=document.createElement("img");return e.src=t,e}),Quickdraw:U.map(function(t){var e=document.createElement("img");return e.src=t,e}),Caltech:Q.map(function(t){var e=document.createElement("img");return e.src=t,e})};function G(t){for(var e=[],a=I[t],n=a.sprite_number,i=a.sprite_size,r=0;r<n;r++){var o=r*i,s=(r+1)*i;r===n-1&&(s=n*i),e.push([o,s])}return e}function Z(t){var e=O[t].length,a=Object(g.a)(Array(e)).map(function(t,a){return m.hsl(0+360/e*a,1,.5).luminance(.5).gl()});a.push(m.hsl(0,0,.5).luminance(.1).gl());var n=Object(g.a)(Array(e)).map(function(t,a){return m.hsl(0+360/e*a,1,.5).luminance(.5).hex()}),i=a.map(function(t){return t.slice(0,3)});return{color_array:a,color_array_hexes:n,status_to_color:i}}function K(t,e){return{coordinates:t.coordinates.slice(e[0],e[1]),labels:t.labels.slice(e[0],e[1]),statuses:t.statuses.slice(e[0],e[1])}}function J(t){for(var e=[],a=0;a<t.length;a++){var n=t[a];e.push(n[0],n[1],0)}return new Float32Array(e)}for(var V=function(t){function e(t){var a;return Object(s.a)(this,e),(a=Object(l.a)(this,Object(d.a)(e).call(this,t))).state={color_array:null,color_array_hexes:null,status_to_color:null},a.init=a.init.bind(Object(h.a)(Object(h.a)(a))),a.animate=a.animate.bind(Object(h.a)(Object(h.a)(a))),a.addPoints=a.addPoints.bind(Object(h.a)(Object(h.a)(a))),a.transitionPoints=a.transitionPoints.bind(Object(h.a)(Object(h.a)(a))),a.addSelectedPoints=a.addSelectedPoints.bind(Object(h.a)(Object(h.a)(a))),a.labelSelected=a.labelSelected.bind(Object(h.a)(Object(h.a)(a))),a.showHover=a.showHover.bind(Object(h.a)(Object(h.a)(a))),a.hover_ctx=null,a.resetCamera=a.resetCamera.bind(Object(h.a)(Object(h.a)(a))),a}return Object(u.a)(e,t),Object(c.a)(e,[{key:"getZFromScale",value:function(t){var e=z.d.degToRad(this.camera.fov);return this.props.height/t/(2*Math.tan(e/2))}},{key:"getScaleFromZ",value:function(t){var e=z.d.degToRad(this.camera.fov),a=2*(Math.tan(e/2)*t);return this.props.height/a}},{key:"zoomHandler",value:function(){var t=D.a.transform,e=t.k,a=-(t.x-this.props.width/2)/e,n=(t.y-this.props.height/2)/e,i=this.getZFromScale(e);this.camera.position.set(a,n,i)}},{key:"addPoints",value:function(){var t=this,e=this.props,a=e.loaded_embedding,n=e.embeddings;this.scene.children[0]=new z.c;for(var i=n[a],r=G(this.props.dataset).map(function(t){return K(i,t)}),o=new z.c,s=I[this.props.dataset],c=s.sprite_side,l=s.sprite_image_size,d=r.length,u=0;u<d;u++){for(var h=r[u],p=h.coordinates.length,g=new z.b,m=J(h.coordinates),v=new Float32Array(2*p),f=0,b=0,y=p;f<y;f++,b+=2){var _=f%c*l/2048,x=Math.floor(f/c)*l/2048;v[b]=_,v[b+1]=x}var w=h.labels.map(function(e){return t.state.status_to_color[e]}),O=k.flatten(w),j=new Float32Array(O),E=1/c,S=this.textures[u],C=[E,E];g.addAttribute("position",new z.a(m,3)),g.addAttribute("offset",new z.a(v,2)),g.addAttribute("color",new z.a(j,3));var M={texture:{value:S},repeat:{value:Object(A.a)(z.k,C)},size:{value:W[this.props.dataset]}},T="\n        uniform sampler2D texture;\n        uniform vec2 repeat;\n        varying vec2 vOffset;\n        varying vec3 vColor;\n        void main() {\n          vec2 uv = vec2( gl_PointCoord.x, gl_PointCoord.y );\n          vec4 tex = texture2D( texture, uv * repeat  + vOffset);\n          if ( tex.r < 0.5 ) discard;\n          tex.r = 1.0;\n          tex.g = 1.0;\n          tex.b = 1.0;\n          gl_FragColor = tex * vec4(vColor, 1.0);\n        }";"Caltech"===this.props.dataset&&(T="\n          uniform sampler2D texture;\n          uniform vec2 repeat;\n          varying vec2 vOffset;\n          varying vec3 vColor;\n          void main() {\n            vec2 uv = vec2( gl_PointCoord.x, gl_PointCoord.y );\n            // vec4 tex = texture2D( texture, uv * repeat );\n            vec4 tex = texture2D( texture, uv * repeat  + vOffset);\n            // if ( tex.r < 0.5 ) discard;\n            if ( uv[0] < 0.1 ) tex = vec4(vColor, 1.0);\n            if ( uv[1] < 0.1 ) tex = vec4(vColor, 1.0);\n            if ( uv[0] > 0.9 ) tex = vec4(vColor, 1.0);\n            if ( uv[1] > 0.9 ) tex = vec4(vColor, 1.0);\n            // tex.r = 1.0;\n            // tex.g = 1.0;\n            // tex.b = 1.0;\n            gl_FragColor = tex;\n        }");var D=new z.i({uniforms:M,vertexShader:"\n        attribute vec2 offset;\n        varying vec2 vOffset;\n        attribute vec3 color;\n        varying vec3 vColor;\n        uniform float size;\n        void main() {\n          vOffset = offset;\n          vColor = color;\n          gl_PointSize = size;\n          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n        }",fragmentShader:T}),P=new z.f(g,D);P.userData={sprite_index:u},o.add(P)}this.scene.children[0]=o}},{key:"transitionPoints",value:function(t,e,a){for(var n=this,i=this.scene.children[0],r=this.scene.children[1].children,o=e[t],s=G(this.props.dataset).map(function(t){return K(o,t)}),c=s.length,l=function(t){var e=i.children[t],o=s[t],c=e.geometry.attributes.position.array.slice(),l=J(o.coordinates),d=e.geometry.attributes.color.array.slice(),u=o.labels.map(function(t){return n.state.status_to_color[t]}),h=k.flatten(u),p=new Float32Array(h),g=new P.Tween(d).to(p,600).easing(P.Easing.Linear.None);g.onUpdate(function(){e.geometry.attributes.color.array=d,e.geometry.attributes.color.needsUpdate=!0}),g.delay(600);var m=new P.Tween(c).to(l,1200).easing(P.Easing.Linear.None);m.onUpdate(function(){e.geometry.attributes.position.array=c,e.geometry.attributes.position.needsUpdate=!0}),m.start().chain(g);var v=r[t],f=Array.from(v.geometry.attributes.indexes.array),b=v.geometry.attributes.position.array.slice(),y=J(f.map(function(t){return o.coordinates[t]})),_=new Float32Array(y),x=1200;a||(x=400);var w={value:W[n.props.dataset]},O=n,j=new P.Tween(w).to({value:0},600).easing(P.Easing.Linear.None).delay(x).onComplete(function(){0===t&&(O.addSelectedPoints(),O.props.setTransitionStatus(.5))});j.onUpdate(function(){v.material.uniforms.size=w});var E=new P.Tween(b).to(_,1200).easing(P.Easing.Linear.None);E.onUpdate(function(){v.geometry.attributes.position.array=b,v.geometry.attributes.position.needsUpdate=!0}),E.onComplete(function(){0===t&&setTimeout(function(){v.material.uniforms.size.value>0?O.props.setTransitionStatus(2.6):(O.addSelectedPoints(),O.props.setTransitionStatus(0))},0)}),v.material.uniforms.size.value>0&&E.chain(j),E.start()},d=0;d<c;d++)l(d)}},{key:"addSelectedPoints",value:function(){var t=this,e=this.props,a=e.loaded_embedding,n=e.embeddings;this.scene.children[1]=new z.c;for(var i=n[a],r=I[this.props.dataset],o=r.sprite_side,s=r.sprite_image_size,c=G(this.props.dataset).map(function(t){return K(i,t)}),l=new z.c,d=c.length,u=function(e){for(var a=c[e],n=[],i=0;i<a.statuses.length;i++)1===a.statuses[i]&&n.push(i);for(var r=new Float32Array(n),d=n.length,u=new z.b,h=J(n.map(function(t){return a.coordinates[t]})),p=new Float32Array(2*d),g=0,m=0,v=d;g<v;g++,m+=2){var f=n[g],b=f%o*s/2048,y=Math.floor(f/o)*s/2048;p[m]=b,p[m+1]=y}var _=n.map(function(t){return[.85,.85,.85]}),x=k.flatten(_),w=new Float32Array(x),O=1/o,j=t.textures[e],E=[O,O];u.addAttribute("position",new z.a(h,3)),u.addAttribute("offset",new z.a(p,2)),u.addAttribute("color",new z.a(w,3)),u.addAttribute("indexes",new z.a(r,1));var S={texture:{value:j},repeat:{value:Object(A.a)(z.k,E)},size:{value:0}},C="\n        uniform sampler2D texture;\n        uniform vec2 repeat;\n        varying vec2 vOffset;\n        varying vec3 vColor;\n        void main() {\n          vec2 uv = vec2( gl_PointCoord.x, gl_PointCoord.y );\n          // vec4 tex = texture2D( texture, uv * repeat );\n          vec4 tex = texture2D( texture, uv * repeat + vOffset );\n          if ( tex.r < 0.5 ) discard;\n          tex.r = 1.0;\n          tex.g = 1.0;\n          tex.b = 1.0;\n          gl_FragColor = tex * vec4(vColor, 1.0);\n        }";"Caltech"===t.props.dataset&&(C="\n          uniform sampler2D texture;\n          uniform vec2 repeat;\n          varying vec2 vOffset;\n          varying vec3 vColor;\n          void main() {\n            vec2 uv = vec2( gl_PointCoord.x, gl_PointCoord.y );\n            // vec4 tex = texture2D( texture, uv * repeat );\n            vec4 tex = texture2D( texture, uv * repeat  + vOffset);\n            // if ( tex.r < 0.5 ) discard;\n            if ( uv[0] < 0.1 ) tex = vec4(vColor, 1.0);\n            if ( uv[1] < 0.1 ) tex = vec4(vColor, 1.0);\n            if ( uv[0] > 0.9 ) tex = vec4(vColor, 1.0);\n            if ( uv[1] > 0.9 ) tex = vec4(vColor, 1.0);\n            // tex.r = 1.0;\n            // tex.g = 1.0;\n            // tex.b = 1.0;\n            gl_FragColor = tex;\n        }");var M=new z.i({uniforms:S,vertexShader:"\n        attribute vec2 offset;\n        varying vec2 vOffset;\n        attribute vec3 color;\n        varying vec3 vColor;\n        uniform float size;\n        void main() {\n          vOffset = offset;\n          vColor = color;\n          gl_PointSize = size;\n          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n        }",fragmentShader:C}),T=new z.f(u,M);l.add(T)},h=0;h<d;h++)u(h);this.scene.children[1]=l}},{key:"revealSelected",value:function(){for(var t=this,e={value:0},a={value:W[this.props.dataset]},n=this.scene.children[1].children,i=function(i){var r=n[i],o=new P.Tween(e).to(a,600).easing(P.Easing.Linear.None);o.onUpdate(function(){r.material.uniforms.size=e});var s=t;o.onComplete(function(){0===i&&setTimeout(function(){s.props.setTransitionStatus(1)},600)}),o.start()},r=0;r<n.length;r++)i(r)}},{key:"labelSelected",value:function(){for(var t=this,e=this.props,a=e.loaded_embedding,n=e.embeddings[a],i=G(this.props.dataset).map(function(t){return K(n,t)}),r=this.scene.children[1].children,o=function(e){var a=i[e],n=r[e],o=Array.from(n.geometry.attributes.indexes.array),s=r[e].geometry.attributes.color.array.slice(),c=o.map(function(e){var n=a.labels[e];return t.state.status_to_color[n]}),l=k.flatten(c),d=new Float32Array(l),u=new P.Tween(s).to(d,400).easing(P.Easing.Linear.None),h=r[e];u.onUpdate(function(){h.geometry.attributes.color.array=s,h.geometry.attributes.color.needsUpdate=!0});var p=t;u.onComplete(function(){0===e&&setTimeout(function(){p.props.setTransitionStatus(2.3)},0)}),u.start()},s=0;s<i.length;s++)o(s)}},{key:"componentDidUpdate",value:function(t){var e=this;if(null===t.loaded_embedding&&null!==this.props.loaded_embedding)Promise.all(F(q[this.props.dataset])).then(function(t){e.textures=t,e.addPoints(),e.addSelectedPoints(),e.props.setTransitionStatus(.5)});else if(t.loaded_embedding!==this.props.loaded_embedding){var a=w(t.loaded_embedding),n=w(this.props.loaded_embedding);if(a.dataset!==n.dataset){var i=Z(n.dataset),r=i.color_array,o=i.color_array_hexes,s=i.status_to_color;for(this.setState({color_array:r,color_array_hexes:o,status_to_color:s});this.scene.children.length>0;)this.scene.remove(this.scene.children[0]);this.resetCamera(),this.props.setTransitionStatus(0);var c=this;setTimeout(function(){Promise.all(F(q[c.props.dataset])).then(function(t){c.textures=t,c.addPoints(),c.addSelectedPoints(),c.props.setTransitionStatus(.5)})},0)}else a.strategy!==n.strategy?this.transitionPoints(this.props.loaded_embedding,this.props.embeddings,!0):a.round!==n.round&&1.5!==this.props.transition_status&&this.transitionPoints(this.props.loaded_embedding,this.props.embeddings,!0)}else.5===this.props.transition_status&&0===t.transition_status||.5===this.props.transition_status&&2.6===t.transition_status?this.revealSelected():2===this.props.transition_status&&1.5===t.transition_status?this.labelSelected(this.props.loaded_embedding,this.props.embeddings):2.3===this.props.transition_status&&2===t.transition_status?this.transitionPoints(this.props.loaded_embedding,this.props.embeddings):(this.props.round,t.round)}},{key:"showHover",value:function(t,e,a,n){var i=this.props.embeddings[this.props.loaded_embedding];this.scene.children[1].visible=!0,this.hover_mount.style.display="block";var r="".concat(t[1]-84-this.props.grem-16-14,"px");this.hover_mount.style.transform="translate3d(".concat(t[0]-42-4,"px, ").concat(r,",0)"),this.hover_ctx=this.hover_mount.childNodes[0].getContext("2d"),this.hover_ctx.imageSmoothingEnabled=!1;var o=this.hover_mount.childNodes[1];this.hover_ctx.fillRect(0,0,84,84);var s=i.statuses[n],c=this.state.status_to_color.slice(0,this.state.status_to_color.length-1);c.push([.5,.5,.5]);var l=null,d="black";1===s?(l="#eee",d="black"):l="rgba("+c[i.labels[n]].map(function(t){return Math.round(255*t)}).join(",")+",1)",this.hover_mount.style.background=l,this.hover_mount.style.color=d;var u=I[this.props.dataset],h=u.sprite_side,p=u.sprite_image_size;o.style.background=l,o.innerText=1===s?"selected":[].concat(Object(g.a)(O[this.props.dataset]),["unlabeled"])[i.labels[n]],this.hover_ctx.drawImage(B[this.props.dataset][e],a%h*p,Math.floor(a/h)*p,p,p,0,0,84,84)}},{key:"checkIntersects",value:function(t){var e=this.props,a=e.width,n=e.height,i=Object(T.a)(t,2),r=i[0],o=i[1],s=I[this.props.dataset].sprite_size;var c=function(t){var e=Object(T.a)(t,2),i=e[0],r=e[1];return new z.l(i/a*2-1,-r/n*2+1,1)}(t);if(this.raycaster.setFromCamera(c,this.camera),this.raycaster.params.Points.threshold=.25,"Caletch"===this.props.dataset&&(this.raycaster.params.Points.threshold=4),void 0!==this.scene.children[0]&&this.scene.children[0].children.length>0){var l=this.raycaster.intersectObjects(this.scene.children[0].children);if(l[0]){var d=function(t){return k.sortBy(t,"distanceToRay")}(l)[0],u=d.object.userData.sprite_index,h=d.index,p=u*s+h;this.showHover([r,o],u,h,p)}else this.hover_mount.style.display="none"}}},{key:"handleMouse",value:function(){var t=this,e=D.d(this.renderer.domElement);this.raycaster=new z.g,e.on("mousemove",function(){var a=D.b(e.node()),n=Object(T.a)(a,2),i=[n[0],n[1]];t.checkIntersects(i)}),e.on("mousedown",function(){t.hover_mount.style.display="none"}),e.on("mouseleave",function(){t.hover_mount.style.display="none"})}},{key:"init",value:function(){var t=this.props,e=t.width,a=t.height,n=Z(this.props.dataset),i=n.color_array,r=n.color_array_hexes,o=n.status_to_color;this.setState({color_array:i,color_array_hexes:r,status_to_color:o}),this.scene=new z.h;var s=e/a;this.camera=new z.e(75,s,.01,1e3),this.camera.position.z=30,this.renderer=new z.m,this.renderer.setClearColor(1118481,1),this.renderer.setSize(e,a),this.mount.appendChild(this.renderer.domElement);var c=new z.c;this.scene.add(c);var l=new z.c;this.scene.add(l),this.d3_zoom=D.e().scaleExtent([this.getScaleFromZ(999),this.getScaleFromZ(.1)]).on("zoom",this.zoomHandler.bind(this));var d=D.d(this.mount);this.view=d,d.call(this.d3_zoom);var u=this.getScaleFromZ(this.camera.position.z),h=D.f.translate(e/2,a/2).scale(u);this.d3_zoom.transform(d,h),this.animate(),this.handleMouse()}},{key:"resetCamera",value:function(){var t=this.props,e=t.width,a=t.height,n=D.d(this.mount);this.camera.position.x=0,this.camera.position.y=0,this.camera.position.z=30;var i=this.getScaleFromZ(this.camera.position.z),r=D.f.translate(e/2,a/2).scale(i);this.d3_zoom.transform(n,r)}},{key:"animate",value:function(){requestAnimationFrame(this.animate),P.update(),this.renderer.sortObjects=!1,this.renderer.render(this.scene,this.camera)}},{key:"componentDidMount",value:function(){this.init()}},{key:"componentWillUnmount",value:function(){this.mount.removeChild(this.renderer.domElement)}},{key:"render",value:function(){var t=this,e=this.props,a=e.width,n=e.height,r=e.grem,o=e.dataset;return i.a.createElement("div",{style:{position:"absolute",left:0,width:a,height:n,background:"#222",overflow:"hidden",cursor:"crosshair"},grem:r},i.a.createElement("div",{style:{position:"absolute",left:0,top:0,width:a,height:n},ref:function(e){t.mount=e}}),i.a.createElement("div",{style:{background:"transparent",display:"flex",flexWrap:"auto",padding:"0 ".concat(r/4,"px"),position:"absolute",left:0,bottom:r/2,pointerEvents:"none"}},i.a.createElement("div",{style:{display:"flex",flexWrap:"auto"}},i.a.createElement("div",{style:{padding:"0 ".concat(r/4,"px")}},"Key:"),i.a.createElement("div",{style:{background:"#888",color:"#111",height:r,padding:"0 ".concat(r/4,"px"),textAlign:"center"}},"unlabeled"),i.a.createElement("div",{style:{background:"#fff",color:"#111",height:r,padding:"0 ".concat(r/4,"px"),textAlign:"center",marginLeft:r/4}},"selected")),i.a.createElement("div",{style:{padding:"0 ".concat(r/4,"px 0 ").concat(.75*r,"px"),display:"flex",flexWrap:"auto"}},i.a.createElement("div",{style:{padding:"0 0 0 ".concat(r/4,"px")}},"Labels:"),null!==this.state.color_array_hexes?this.state.color_array_hexes.map(function(e,a){return i.a.createElement("div",{key:"color_"+a,style:{background:t.state.color_array_hexes[a],height:r,textAlign:"center",color:"#111",padding:"0 ".concat(r/4,"px"),marginLeft:r/4}},O[o][a])}):null)),i.a.createElement("div",{style:{position:"fixed",left:0,top:0,width:92,pointerEvents:"none",padding:4,display:"none",color:"white",height:r+84+12+0,lineHeight:0,border:"solid ".concat(0,"px rgba(0,0,0,0.3)")},ref:function(e){t.hover_mount=e}},i.a.createElement("canvas",{width:84,height:84,style:{imageRendering:"pixelated"}}),i.a.createElement("div",{style:{width:84,height:r,textAlign:"center",lineHeight:1.5,paddingTop:4,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}})))}}]),e}(n.Component),Y=(Object(g.a)(Array(40)).map(function(t){return null}),Object(g.a)(Array(12)).map(function(t,e){return"".concat("","/").concat("mnist_").concat(e,".png")})),$={MNIST:Y,Quickdraw:Object(g.a)(Array(12)).map(function(t,e){return"".concat("","/").concat("QUICKDRAW_").concat(e,".png")})},X=Object(g.a)(Array(10)).map(function(t,e){return m.hsl(0+36*e,1,.5).luminance(.5).hex()}),tt=(n.Component,function(t){function e(){return Object(s.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(u.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){var t=this.props,e=t.width,a=t.height,n=t.grem,r=t.strategies,o=t.strategy_colors,s=t.strategy,c=t.active_embedding,l=t.requested_embedding,d=t.loaded_embedding,u=t.embeddings,h=(t.mnist_images,t.ranges,t.transition_status),p=t.setTransitionStatus,g=t.loading_round,m=(t.header_height,t.footer_height),v=t.round,f=t.round_limit,b=t.dataset;return i.a.createElement("div",{style:{position:"relative"}},i.a.createElement(V,{width:e,height:a,grem:n,active_embedding:c,strategies:r,strategy_colors:o,strategy:s,embeddings:u,requested_embedding:l,loaded_embedding:d,transition_status:h,setTransitionStatus:p,loading_round:g,footer_height:m,selectRound:this.props.selectRound,round:v,round_limit:f,dataset:b}),null)}}]),e}(n.Component)),et=function(t){function e(){return Object(s.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(u.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){var t,e,a,n=this,r=this.props,o=r.transition_status,s=r.grem,c=r.round_limit,l=r.round;0===o?(e="Loading...",a=null):.5===o?(e="Selecting points...",a=null):1===o?(e="".concat("Caltech"===this.props.dataset?"50":"1,000"," points selected"),a=1.5):1.5===o?(e="Labeling points...",a=null):2===o?(e="Retraining model...",a=null):2.3===o?(e="Retraining model...",a=null):2.6===o&&(e="Selecting points...",a=null);var d=l;return o>1&&o<2.3&&(d=Math.max(0,d-1)),i.a.createElement("div",{style:{display:"flex",position:"absolute",bottom:this.props.footer_height+2.5*s,left:0,padding:"0 ".concat(s/4,"px"),pointerEvents:"none"}},i.a.createElement("div",{style:{padding:"0 ".concat(s/4,"px"),position:"relative"}},e),i.a.createElement("div",{style:{padding:"0 ".concat(s/4,"px"),display:null===a?"none":"block"}},i.a.createElement("button",{style:{pointerEvents:"auto"},onClick:function(){n.props.toggleList(!0)}},"view list")),i.a.createElement("div",{style:{padding:"0 ".concat(s/4,"px")}},c!==d?i.a.createElement("button",{style:(t={width:140,height:s,background:null===a?"#444":"white",color:null===a?"white":"black",textAlign:"left",cursor:null===a?"default":"pointer",textDecoration:null===a?"none":"underline",borderRadius:s/2},Object(p.a)(t,"textAlign","center"),Object(p.a)(t,"pointerEvents","auto"),Object(p.a)(t,"display",null===a?"none":"block"),t),disabled:null===a,onClick:function(){null!==a&&n.props.setTransitionStatus(a)}},"Label & train"):null))}}]),e}(n.Component),at=function(t){function e(t){var a;return Object(s.a)(this,e),(a=Object(l.a)(this,Object(d.a)(e).call(this,t))).state={count:0},a}return Object(u.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){var t=0,e=0,a=this;function n(){t+=25;var i=Math.floor(t);i!==e&&(e=i),a.setState({count:e}),e<1e3?requestAnimationFrame(n):setTimeout(function(){a.props.labelsGotten()},200)}setTimeout(function(){return requestAnimationFrame(n)},200)}},{key:"render",value:function(){var t=this.props;t.grem,t.ww;return i.a.createElement("div",null,i.a.createElement("div",{style:{position:"absolute",height:"100%",width:"100%",left:0,top:0,background:"#ddd"}},i.a.createElement("div",{style:{height:"100%",width:"".concat(this.state.count/1e3*100,"%"),overflow:"hidden"}},i.a.createElement("div",{style:{height:"100%",width:"100%",background:"linear-gradient(to right, ".concat(this.props.gradient_string,")")}}))))}}]),e}(n.Component),nt={sprite_side:73,sprite_size:5329,sprite_number:12,sprite_image_size:28},it=Object.assign({},nt,{sprite_number:13}),rt=Object.assign({},nt,{sprite_side:9,sprite_size:81,sprite_number:11,sprite_image_size:224}),ot={MNIST:nt,Quickdraw:it,Caltech:rt},st=Object(g.a)(Array(nt.sprite_number)).map(function(t,e){return"".concat("","/").concat("mnist_").concat(e,".png")}),ct=Object(g.a)(Array(it.sprite_number)).map(function(t,e){return"".concat("","/").concat("QUICKDRAW_").concat(e,".png")}),lt={MNIST:st,Quickdraw:ct,Caltech:Object(g.a)(Array(rt.sprite_number)).map(function(t,e){return"".concat("","/").concat("CALTECH_").concat(e,".png")})},dt=function(t){function e(){return Object(s.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(u.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){var t=this,e=this.props,a=e.grem,n=e.embeddings,r=e.loaded_embedding,o=e.dataset,s=e.ww,c=e.wh;console.log(c);var l=[],d=n[r];if(d)for(var u=0;u<d.statuses.length;u++)1===d.statuses[u]&&l.push(u);var h=ot[o],p=h.sprite_size,g=h.sprite_side,m=h.sprite_image_size,v=100+a/2,f=Math.floor((s-a)/v),b=(s-a-a/2*(f-1))/f,y=b/m,_=l.map(function(t){var e=Math.floor(t/p),a=t%p;return[e,a%g,Math.floor(a/g)]});return i.a.createElement("div",{style:{background:"#888"}},i.a.createElement("div",{style:{padding:a/2,background:"white",color:"black",position:"relative"}},"Selected points",i.a.createElement("button",{style:{position:"absolute",right:0,top:0,padding:a/2,color:"black"},onClick:function(){t.props.toggleList(!1)}},"\xd7")),i.a.createElement("div",{style:{overflow:"auto",height:c-6*a}},i.a.createElement("div",{style:{padding:a/2,paddingBottom:0}},"Caltech"===this.props.dataset?"50":"1,000"," points selected for labeling from the ",this.props.dataset," dataset using the"," ",this.props.strategy," strategy:"),i.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, ".concat(b,"px)"),gridRowGap:a/2,gridColumnGap:a/2,padding:a/2}},_.length>0?_.map(function(t,e){return i.a.createElement("div",{key:t,style:{paddingBottom:"100%",position:"relative"}},i.a.createElement("div",{style:{position:"absolute",left:0,top:0,right:0,bottom:0,backgroundImage:"url(".concat(lt[o][t[0]],")"),backgroundSize:"".concat(2048*y,"px ").concat(2048*y,"px"),backgroundPosition:"-".concat(t[1]*y*m,"px -").concat(t[2]*y*m,"px"),imageRendering:"pixelated"}}))}):null)))}}]),e}(n.Component),ut=4,ht=Object(g.a)(Array(ut)).map(function(t,e){return m.hsl(90/ut*e-45,1,.5).luminance(.5).hex()}),pt=[],gt=0;gt<12;gt++){var mt=5329*gt,vt=5329*(gt+1);11===gt&&(vt=63948),pt.push([mt,vt])}var ft=Object(g.a)(Array(12)).map(function(t,e){return"".concat("","/").concat("mnist_").concat(e,".png")}).map(function(t){var e=document.createElement("img");return e.src=t,e});ut=10;var bt,yt=Object(g.a)(Array(ut)).map(function(t,e){return m.hsl(0+360/ut*e,1,.5).luminance(.5).hex()}),_t=yt.reduce(function(t,e,a){return t+e+" "+Math.round(a/ut*100)+(a===ut-1?"%":"%, ")},""),xt=function(t){function e(t){var a;return Object(s.a)(this,e),(a=Object(l.a)(this,Object(d.a)(e).call(this,t))).state={ww:null,wh:null,header_height:null,footer_height:null,transition_status:0,loading_round:!1,simulating_labeling:!1,show_list:!1},a.setSize=a.setSize.bind(Object(h.a)(Object(h.a)(a))),a.setHeaderHeight=a.setHeaderHeight.bind(Object(h.a)(Object(h.a)(a))),a.setFooterHeight=a.setFooterHeight.bind(Object(h.a)(Object(h.a)(a))),a.setTransitionStatus=a.setTransitionStatus.bind(Object(h.a)(Object(h.a)(a))),a.labelsGotten=a.labelsGotten.bind(Object(h.a)(Object(h.a)(a))),a.toggleList=a.toggleList.bind(Object(h.a)(Object(h.a)(a))),a}return Object(u.a)(e,t),Object(c.a)(e,[{key:"setHeaderHeight",value:function(t){this.setState({header_height:t})}},{key:"setFooterHeight",value:function(t){this.setState({footer_height:t})}},{key:"toggleList",value:function(t){this.setState({show_list:t})}},{key:"setSize",value:function(){this.setState({ww:window.innerWidth,wh:window.innerHeight})}},{key:"componentWillMount",value:function(){this.setSize()}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.setSize)}},{key:"componentDidUpdate",value:function(t,e){!0===this.state.loading_round&&t.loaded_embedding!==this.props.loaded_embedding&&this.setState({loading_round:!1})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.setSize)}},{key:"setTransitionStatus",value:function(t){1.5===t?(this.setState({transition_status:t,simulating_labeling:!0}),this.props.selectRound(this.props.round+1)):this.setState({transition_status:t})}},{key:"labelsGotten",value:function(){this.setState({transition_status:2,loading_round:!0,simulating_labeling:!1})}},{key:"render",value:function(){var t=this,e=this.state,a=e.ww,n=e.wh,r=e.header_height,o=e.footer_height,s=e.loading_round,c=e.simulating_labeling,l=e.transition_status,d=e.show_list,u=this.props,h=u.dataset,g=u.strategy,m=u.round,v=u.datasets,b=u.strategies,y=u.selectDataset,_=u.selectStrategy,w=u.embeddings,O=u.requested_embedding,j=u.loaded_embedding,k=u.strategy_explored;u.toggleList;return null===a?i.a.createElement("div",{style:{padding:5.25}},"Loading layout..."):i.a.createElement("div",{style:{width:a,height:n,overflow:"hidden",position:"relative"}},i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{style:{position:"fixed",top:0,right:0,padding:10.5,zIndex:999,background:"red",display:"none"}},l),null!==o&&null!==r?i.a.createElement("div",{style:{background:"white",height:n}},i.a.createElement(tt,{width:a,height:n,grem:21,strategies:b,strategy_colors:ht,strategy:g,dataset:h,embeddings:w,requested_embedding:O,loaded_embedding:j,loading_round:s,selectRound:this.props.selectRound,mnist_images:ft,ranges:pt,transition_status:this.state.transition_status,setTransitionStatus:this.setTransitionStatus,footer_height:o,round:m,header_height:r,round_limit:7})):null,null!==o?i.a.createElement(et,{transition_status:this.state.transition_status,grem:21,footer_height:o,setTransitionStatus:this.setTransitionStatus,round_limit:7,round:m,dataset:h,toggleList:this.toggleList}):null,i.a.createElement(f,{datasets:v,selectDataset:y,strategies:b,strategy:g,strategy_colors:ht,selectStrategy:_,dataset:h,activeStyle:x,setHeaderHeight:this.setHeaderHeight,gradient_string:_t,grem:21,transition_status:this.state.transition_status}),null!==r?i.a.createElement(M,{round:m,ww:a,grem:21,strategies:b,strategy_colors:ht,strategy:g,setFooterHeight:this.setFooterHeight,selectRound:this.props.selectRound,gradient_string:_t,color_array_hexes:yt,transition_status:this.state.transition_status,setTransitionStatus:this.setTransitionStatus,simulating_labeling:c,strategy_explored:k,round_limit:7,dataset:h}):null,this.state.simulating_labeling?i.a.createElement("div",{style:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",display:"grid",justifyItems:"center",alignItems:"center",color:"black"}},i.a.createElement("div",{style:Object(p.a)({position:"relative",width:Math.min(500,a),background:"white",color:"black",padding:21},"background","#888")},i.a.createElement("div",{style:{marginBottom:10.5}},"Round ",m+1),i.a.createElement("div",{style:{position:"relative",height:21}},i.a.createElement(at,{grem:21,gradient_string:_t,ww:a,labelsGotten:this.labelsGotten})),i.a.createElement("div",{style:{position:"relative",paddingTop:10.5}},"Getting labels for selected points..."))):null,d?i.a.createElement("div",{style:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",display:"grid",justifyItems:"center",alignItems:"center",color:"black",background:"rgba(0, 0, 0, 0.4)"},onClick:function(){t.toggleList(!1)}},i.a.createElement("div",{style:{position:"relative",width:a-63,color:"black"},onClick:function(t){t.stopPropagation()}},i.a.createElement(dt,{grem:21,dataset:h,strategy:g,embeddings:w,loaded_embedding:j,wh:n,ww:a-63,toggleList:this.toggleList}))):null))}}]),e}(n.Component),wt=["MNIST","Quickdraw","Caltech"],Ot=["random","entropy","adversarial","ensemble"],jt=(bt={},Object(p.a)(bt,wt[0],["mnist_random_round","mnist_entropy_round","mnist_adv_round","mnist_ensemble_entropy_round"]),Object(p.a)(bt,wt[1],["quickdraw_random_round","quickdraw_entropy_round","quickdraw_adv_round","quickdraw_ensemble_entropy_round"]),Object(p.a)(bt,wt[2],["caltech_random_round","caltech_entropy_round","caltech_adv_round","caltech_ensemble_entropy_round"]),bt);function kt(t,e,a){return"".concat(t,"-").concat(e,"-").concat(a)}var Et=function(t){function e(t){var a;return Object(s.a)(this,e),(a=Object(l.a)(this,Object(d.a)(e).call(this,t))).state={embeddings:{},dataset:wt[0],strategy:Ot[1],round:0,requested_embedding:null,loaded_embedding:null,strategy_explored:0},a.scaleEmbeddings=a.scaleEmbeddings.bind(Object(h.a)(Object(h.a)(a))),a.fetchData=a.fetchData.bind(Object(h.a)(Object(h.a)(a))),a.checkOrFetchData=a.checkOrFetchData.bind(Object(h.a)(Object(h.a)(a))),a.selectRound=a.selectRound.bind(Object(h.a)(Object(h.a)(a))),a}return Object(u.a)(e,t),Object(c.a)(e,[{key:"selectRound",value:function(t){var e=Math.max(this.state.strategy_explored,t);this.setState({round:t,strategy_explored:e}),this.checkOrFetchData(this.state.dataset,this.state.strategy,t)}},{key:"selectDataset",value:function(t){this.setState({dataset:wt[t],strategy_explored:0,round:0}),this.checkOrFetchData(wt[t],this.state.strategy,this.state.round)}},{key:"selectStrategy",value:function(t){this.setState({strategy:Ot[t]}),this.checkOrFetchData(this.state.dataset,Ot[t],this.state.round)}},{key:"checkOrFetchData",value:function(t,e,a){var n=this.state.embeddings,i=kt(t,e,a);this.setState({requested_embedding:i}),void 0!==n[i]?this.setState({loaded_embedding:i}):this.fetchData(t,e,a)}},{key:"scaleEmbeddings",value:function(t){var e=t.map(function(t){return Math.abs(t[0])}),a=t.map(function(t){return Math.abs(t[1])}),n=k.max(e),i=k.max(a),r=Math.max(n,i),o=D.c().domain([-r,r]).range([-20,20]);return t.map(function(t){return[o(t[0]),o(t[1])]})}},{key:"fetchData",value:function(t,e,a){var n=this,i="".concat("","/").concat(jt[t][Ot.indexOf(e)]).concat(a,".json");fetch(i).then(function(t){return t.json()}).then(function(i){var r=i.coordinates,o=r.map(function(t){return Math.abs(t[0])}),s=r.map(function(t){return Math.abs(t[1])}),c=k.max(o),l=k.max(s),d=Math.max(c,l),u=D.c().domain([-d,d]).range([-20,20]),h=r.map(function(t){return[u(t[0]),u(t[1])]}),g={};g.coordinates=h,g.statuses=i.status,g.labels=i.labels;var m=kt(t,e,a);n.setState({loaded_embedding:m,embeddings:Object.assign({},n.state.embeddings,Object(p.a)({},m,g))})})}},{key:"componentDidMount",value:function(){var t=this.state,e=t.dataset,a=t.strategy,n=t.round;this.checkOrFetchData(e,a,n)}},{key:"render",value:function(){return i.a.createElement(xt,Object.assign({},this.state,{datasets:wt,strategies:Ot,selectDataset:this.selectDataset.bind(this),selectStrategy:this.selectStrategy.bind(this),selectRound:this.selectRound.bind(this)}))}}]),e}(n.Component),St=(a(29),function(t){function e(){return Object(s.a)(this,e),Object(l.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(u.a)(e,t),Object(c.a)(e,[{key:"render",value:function(){return i.a.createElement(Et,null)}}]),e}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(St,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[21,2,1]]]);
//# sourceMappingURL=main.231f23e3.chunk.js.map